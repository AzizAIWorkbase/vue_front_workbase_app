"use strict";(self["webpackChunkvue_workbase_app"]=self["webpackChunkvue_workbase_app"]||[]).push([[505],{30816:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var t=n(50124),a=n(48534),u=(n(91038),n(78783),n(41539),n(66252)),i=n(2262),l=n(3577),s=n(59228),o=n(1875),c=n(97402),d=n(54028),m=n(62587),p=n(91296),v=n.n(p),f=n(22201),w=n(15836),g={key:0,class:"pt-1.5 pb-0.5"},y=(0,u._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),_=[y],b={key:1,class:"text-2xl text-primary"},x={key:2,class:"pt-1.5 pb-0.5"},h=(0,u._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),k=[h],U={class:"text-orange-500"},S=(0,u._)("div",null,null,-1),D=(0,u.Uk)(" Назад "),$=(0,u.Uk)(" Продолжить "),Z={__name:"address-form",props:{categorySlug:{},serviceSlugs:{}},setup:function(e){var r=e,n=(0,i.BK)(r),p=n.categorySlug,y=n.serviceSlugs,h=(0,f.tv)(),Z=(0,o.Z)(),V=Z.category,C=Z.onGetWhenNotLoaded,M=Z.isLoading;(0,u.bv)((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C(p.value);case 2:case"end":return e.stop()}}),e)}))));var H=(0,c.ls)(p.value),q=H.currentDraftedOrder,W=(H.isUpdating,H.onUpdate),P={apiKey:"12a2dc9a-cec9-4cd8-a653-cb852b6dec85",lang:"ru_RU",coordorder:"latlong",enterprise:!1,version:"2.1"},Y=function(){h.back()};(0,u.bv)((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,w.xk)();case 2:case"end":return e.stop()}}),e)}))));var z=function(e){null!=e.get&&(B.value=e.get("coords"))},K=(0,i.iH)(q.value.address),j=(0,i.iH)([]),B=(0,i.iH)(q.value.lat&&q.value.lng?[q.value.lat,q.value.lng]:[]),O=(0,i.iH)(),L=function(e){B.value=e.geometry.getCoordinates(),K.value=e.getAddressLine(),console.log(Array.from(B.value)),O.value.setCenter(Array.from(B.value),16,{duration:200})};(0,u.YP)(B,v()((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ymaps.geocode(Array.from(B.value));case 2:return e.abrupt("return",K.value=e.sent.geoObjects.get(0).getAddressLine());case 3:case"end":return e.stop()}}),e)}))),100)),(0,u.YP)(K,(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ymaps.geocode(K.value);case 2:j.value=e.sent.geoObjects.toArray();case 3:case"end":return e.stop()}}),e)}))));var A=(0,i.qj)({}),F=(0,d.ZP)({address:{required:m.BM.withMessage("Введите свой адрес",m.C1)},placemark:{}},{address:K,placemark:B},{$externalResults:A}),I=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.value.$validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,W({address:K.value,lat:B.value[0],lng:B.value[1]}).catch((function(e){var r=e.response;if(400==r.status){var n=r.data.error;"validation"==n.type&&(A.address=n.fields.address||[],A.placemark=n.fields.lat||n.fields.lng||[])}}));case 6:h.push({name:"order.update",params:{categorySlug:p.value,serviceSlugs:y.value,form:"time"}});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return function(e,r){var n=(0,u.up)("c-search"),t=(0,u.up)("c-button");return(0,u.wg)(),(0,u.j4)(s.Z,{onOnSubmit:I},{header:(0,u.w5)((function(){return[(0,i.SU)(M)?((0,u.wg)(),(0,u.iD)("div",g,_)):((0,u.wg)(),(0,u.iD)("h1",b,"Укажите ваш адрес")),(0,i.SU)(M)?((0,u.wg)(),(0,u.iD)("div",x,k)):(0,u.kq)("",!0),(0,u._)("p",U,(0,l.zw)((0,i.SU)(V).name),1)]})),footer:(0,u.w5)((function(){return[(0,u.Wm)(t,{scheme:"secondary",type:"button",onClick:Y},{default:(0,u.w5)((function(){return[D]})),_:1}),(0,u.Wm)(t,null,{default:(0,u.w5)((function(){return[$]})),_:1})]})),default:(0,u.w5)((function(){var e;return[(0,u.Wm)(n,{modelValue:K.value,"onUpdate:modelValue":r[0]||(r[0]=function(e){return K.value=e}),items:j.value,onOnSelectItem:L,placeholder:"Город, район, улица, дом"},{"list-item":(0,u.w5)((function(e){var r=e.item;return[(0,u.Uk)((0,l.zw)(r.getAddressLine()),1)]})),_:1},8,["modelValue","items"]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(F).address.$errors||(0,i.SU)(F).placemark.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500 py-2",key:e.$uid},(0,l.zw)(e.$message),1)})),128)),(0,u.Wm)((0,i.SU)(w.xR),{settings:P,coords:null!==(e=B.value)&&void 0!==e&&e.length?B.value:[41.31377189085043,69.25741676336806],zoom:10,"init-without-markers":"",class:"h-96 rounded-md overflow-clip",onClick:z,onMapWasInitialized:r[1]||(r[1]=function(e){return O.value=e})},{default:(0,u.w5)((function(){var e;return[S,2==(null===(e=B.value)||void 0===e?void 0:e.length)?((0,u.wg)(),(0,u.j4)((0,i.SU)(w.Jk),{key:0,markerId:"address",coords:B.value},null,8,["coords"])):(0,u.kq)("",!0)]})),_:1},8,["coords"])]})),_:1})}}};const V=Z;var C=V},70029:function(e,r,n){n.r(r),n.d(r,{default:function(){return D}});var t=n(66252),a=n(3577),u=n(49963),i={key:0,class:"pt-1.5 pb-0.5"},l=(0,t._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),s=[l],o={key:1,class:"text-2xl text-primary"},c={key:2,class:"pt-1.5 pb-0.5 mb-3"},d=(0,t._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),m=[d],p={class:"text-orange-500"},v={class:"select-none"},f=(0,t.Uk)(" у исполнителя "),w={class:"select-none"},g=(0,t.Uk)(" у заказчика "),y={class:"select-none"},_=(0,t.Uk)(" дистанционно "),b=(0,t.Uk)(" Назад "),x=(0,t.Uk)(" Продолжить ");function h(e,r){var n=(0,t.up)("c-button"),l=(0,t.up)("BaseForm");return(0,t.wg)(),(0,t.j4)(l,{onOnSubmit:e.onSubmit},{header:(0,t.w5)((function(){return[e.categoryIsLoading?((0,t.wg)(),(0,t.iD)("div",i,s)):((0,t.wg)(),(0,t.iD)("h1",o,(0,a.zw)(1==e.category.id?"Выберите место проведения занятий":"Выберите место проведения работы"),1)),e.categoryIsLoading?((0,t.wg)(),(0,t.iD)("div",c,m)):(0,t.kq)("",!0),(0,t._)("p",p,(0,a.zw)(e.category.name),1)]})),footer:(0,t.w5)((function(){return[(0,t.Wm)(n,{scheme:"secondary",type:"button",onClick:e.back},{default:(0,t.w5)((function(){return[b]})),_:1},8,["onClick"]),(0,t.Wm)(n,null,{default:(0,t.w5)((function(){return[x]})),_:1})]})),default:(0,t.w5)((function(){return[(0,t._)("ul",null,[(0,t._)("li",null,[(0,t._)("label",v,[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.state.at_executor=r}),type:"checkbox"},null,512),[[u.e8,e.state.at_executor]]),f])]),(0,t._)("li",null,[(0,t._)("label",w,[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.state.at_customer=r}),type:"checkbox"},null,512),[[u.e8,e.state.at_customer]]),g])]),(0,t._)("li",null,[(0,t._)("label",y,[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":r[2]||(r[2]=function(r){return e.state.is_online=r}),type:"checkbox"},null,512),[[u.e8,e.state.is_online]]),_])])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.v.at_customer.$errors,(function(r){return(0,t.wg)(),(0,t.iD)("div",{class:"text-red-500",key:r.$uid},(0,a.zw)(e.$error.message),1)})),128)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.v.is_online.$errors,(function(r){return(0,t.wg)(),(0,t.iD)("div",{class:"text-red-500",key:r.$uid},(0,a.zw)(e.$error.message),1)})),128)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.v.at_executor.$errors,(function(r){return(0,t.wg)(),(0,t.iD)("div",{class:"text-red-500",key:r.$uid},(0,a.zw)(e.$error.message),1)})),128))]})),_:1},8,["onOnSubmit"])}var k=n(83744);const U={},S=(0,k.Z)(U,[["render",h]]);var D=S},64046:function(e,r,n){n.r(r),n.d(r,{default:function(){return S}});var t=n(50124),a=n(48534),u=(n(82526),n(41817),n(21703),n(96647),n(66252)),i=n(2262),l=n(3577),s=n(1875),o=n(97402),c=n(54028),d=n(62587),m=n(22201),p=n(59228),v={key:0,class:"pt-1.5 pb-0.5"},f=(0,u._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),w=[f],g={key:2,class:"pt-1.5 pb-0.5"},y=(0,u._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),_=[y],b=(0,u.Uk)(" Дополнительные пожелания "),x=(0,u.Uk)(" Назад "),h=(0,u.Uk)(" Продолжить "),k={__name:"other-form",props:{categorySlug:{},serviceSlugs:{}},setup:function(e){var r,n=e,f=(0,i.BK)(n),y=f.categorySlug,k=f.serviceSlugs,U=(0,m.tv)(),S=function(){U.back()},D=(0,s.Z)(),$=D.category,Z=D.onGetWhenNotLoaded,V=D.isLoading;(0,u.bv)((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z(y.value);case 2:case"end":return e.stop()}}),e)}))));var C=(0,o.ls)(y.value),M=C.currentDraftedOrder,H=C.onUpdate,q=C.isUpdating,W=(0,i.iH)((null===M||void 0===M||null===(r=M.value)||void 0===r?void 0:r.description)||""),P=(0,i.qj)({description:[]}),Y=(0,c.ZP)({description:{minLength:d.BM.withMessage("Минимиальное количество символов 5.",(0,d.Ei)(5))}},{description:W},{$externalResults:P}),z=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.value.$validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,H({description:W.value}).catch((function(e){var r=e.response,n=null===r||void 0===r?void 0:r.data,t=n.error;throw"validation"==(null===t||void 0===t?void 0:t.type)&&(P.description=t.fields.description||[]),new Error(t)}));case 6:U.push({name:"order.update",params:{categorySlug:y.value,serviceSlugs:k.value,form:"publish"}});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),K=(0,u.Fl)((function(){return q.value||V.value}));return function(e,r){var n=(0,u.up)("c-textarea"),t=(0,u.up)("c-button");return(0,u.wg)(),(0,u.j4)(p.Z,{onOnSubmit:z},{header:(0,u.w5)((function(){return[(0,i.SU)(V)?((0,u.wg)(),(0,u.iD)("div",v,w)):((0,u.wg)(),(0,u.iD)("h1",{key:1,class:(0,l.C_)(["text-2xl text-primary",{"animate-pulse":(0,i.SU)(K)}])}," Пожелания к заказу ",2)),(0,i.SU)(V)?((0,u.wg)(),(0,u.iD)("div",g,_)):(0,u.kq)("",!0),(0,u._)("p",{class:(0,l.C_)(["text-orange-500",{"animate-pulse":(0,i.SU)(K)}])},(0,l.zw)((0,i.SU)($).name),3)]})),footer:(0,u.w5)((function(){return[(0,u.Wm)(t,{scheme:"secondary",type:"button",onClick:S,loading:(0,i.SU)(K),disabled:(0,i.SU)(K)},{default:(0,u.w5)((function(){return[x]})),_:1},8,["loading","disabled"]),(0,u.Wm)(t,{loading:(0,i.SU)(K),disabled:(0,i.SU)(K)},{default:(0,u.w5)((function(){return[h]})),_:1},8,["loading","disabled"])]})),default:(0,u.w5)((function(){return[(0,u._)("div",{class:(0,l.C_)({"animate-pulse":(0,i.SU)(K)})},[(0,u.Wm)(n,{autofocus:"",name:"kfjklsdj",modelValue:W.value,"onUpdate:modelValue":r[0]||(r[0]=function(e){return W.value=e}),class:"w-full max-h-[600px] min-h-[170px]",rows:"10",placeholder:"В этом поле Вы можете написать дополнительные условия и уточнения по работе. Данное поле поможет специалисту лучше подготовится к работе и понять специфику задачи.\n\tНапример:\n\t1. Прошу приобрести розетки и лампочки самостоятельно, дополнительные расходы будут покрыты Заказчиком. \n\t2. По мимо уборки квартиры, необходимо постирать и погладить одежду."},{default:(0,u.w5)((function(){return[b]})),_:1},8,["modelValue"]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(Y).description.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500 mb-3 mt-1",key:e.$uid},(0,l.zw)(e.$message),1)})),128))],2)]})),_:1})}}};const U=k;var S=U},27791:function(e,r,n){n.r(r),n.d(r,{default:function(){return P}});var t=n(50124),a=n(48534),u=(n(21703),n(96647),n(66252)),i=n(2262),l=n(3577),s=n(1875),o=n(97402),c=n(54028),d=n(62587),m=n(22201),p=n(59228),v={key:0,class:"pt-1.5 pb-0.5"},f=(0,u._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),w=[f],g={key:1,class:"text-2xl text-primary"},y={key:2,class:"pt-1.5 pb-0.5"},_=(0,u._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),b=[_],x={class:"text-orange-500"},h={class:"grid gap-4 grid-cols-2"},k={class:"col-span-2 sm:col-span-1 md:col-span-2 lg:col-span-1"},U=(0,u.Uk)("От:"),S=(0,u.Uk)(" Минимальный бюджет за работу "),D={class:"mt-1 mb-3"},$={class:"col-span-2 sm:col-span-1 md:col-span-2 lg:col-span-1 flex flex-col"},Z=(0,u.Uk)("До:"),V=(0,u.Uk)(" Максимальный бюджет за работу "),C={class:"mt-1 mb-3"},M=(0,u.Uk)(" Назад "),H=(0,u.Uk)(" Продолжить "),q={__name:"price-form",props:{categorySlug:{},serviceSlugs:{}},setup:function(e){var r,n,f=e,_=(0,i.BK)(f),q=_.categorySlug,W=_.serviceSlugs,P=(0,m.tv)(),Y=(0,s.Z)(),z=Y.category,K=Y.onGetWhenNotLoaded,j=Y.isLoading;(0,u.bv)((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K(q.value);case 2:case"end":return e.stop()}}),e)}))));var B=function(){P.back()},O=(0,o.ls)(q.value),L=O.currentDraftedOrder,A=(O.isUpdating,O.onUpdate),F=(0,i.iH)((null===(r=L.value)||void 0===r?void 0:r.price_min)||""),I=(0,i.iH)((null===(n=L.value)||void 0===n?void 0:n.price_max)||""),R=(0,i.qj)({minPrice:[],maxPrice:[]});(0,u.YP)(F,(function(){R.minPrice=[]})),(0,u.YP)(I,(function(){R.maxPrice=[]}));var E={minPrice:{requiredIf:d.BM.withMessage("",(0,d.CF)(!1))},maxPrice:{required:d.BM.withMessage("Укажите максимальную цену",d.C1)}},N=(0,c.ZP)(E,{minPrice:F,maxPrice:I},{$externalResults:R}),G=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.value.$validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,A({price_min:F.value||0,price_max:I.value,is_ranged_price:!0}).catch((function(e){var r=e.response,n=null===r||void 0===r?void 0:r.data,t=n.error;throw"validation"==(null===t||void 0===t?void 0:t.type)&&(R.minPrice=t.fields.price_min||[],R.maxPrice=t.fields.price_max||[]),new Error(t)}));case 6:P.push({name:"order.update",params:{categorySlug:q.value,serviceSlugs:W.value,form:"other"}});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return function(e,r){var n=(0,u.up)("c-input"),t=(0,u.up)("c-button");return(0,u.wg)(),(0,u.j4)(p.Z,{onOnSubmit:G},{header:(0,u.w5)((function(){return[(0,i.SU)(j)?((0,u.wg)(),(0,u.iD)("div",v,w)):((0,u.wg)(),(0,u.iD)("h1",g,"Укажите цену за услугу")),(0,i.SU)(j)?((0,u.wg)(),(0,u.iD)("div",y,b)):(0,u.kq)("",!0),(0,u._)("p",x,(0,l.zw)((0,i.SU)(z).name),1)]})),footer:(0,u.w5)((function(){return[(0,u.Wm)(t,{scheme:"secondary",type:"button",onClick:B},{default:(0,u.w5)((function(){return[M]})),_:1}),(0,u.Wm)(t,null,{default:(0,u.w5)((function(){return[H]})),_:1})]})),default:(0,u.w5)((function(){return[(0,u._)("div",h,[(0,u._)("div",k,[(0,u.Wm)(n,{placeholder:"1000",type:"number",modelValue:F.value,"onUpdate:modelValue":r[0]||(r[0]=function(e){return F.value=e}),class:"w-full py-2",min:"0",name:"minPrice"},{prefix:(0,u.w5)((function(){return[U]})),default:(0,u.w5)((function(){return[S]})),_:1},8,["modelValue"]),(0,u._)("div",D,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(N).minPrice.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,l.zw)(e.$message),1)})),128))])]),(0,u._)("div",$,[(0,u.Wm)(n,{placeholder:"10000",type:"number",modelValue:I.value,"onUpdate:modelValue":r[1]||(r[1]=function(e){return I.value=e}),name:"maxPrice",class:"w-full py-2",autofocus:"",min:"0"},{prefix:(0,u.w5)((function(){return[Z]})),default:(0,u.w5)((function(){return[V]})),_:1},8,["modelValue"]),(0,u._)("div",C,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(N).maxPrice.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,l.zw)(e.$message),1)})),128))])])])]})),_:1})}}};const W=q;var P=W},56938:function(e,r,n){n.r(r),n.d(r,{default:function(){return pe}});var t=n(50124),a=n(48534),u=(n(92222),n(66252)),i=n(3577),l=n(2262),s=n(49963),o=n(1875),c=n(22201),d=n(59228),m=n(19078),p=n(7294),v=n(62587),f=n(54028),w=n(32083),g=n(97402),y={key:0,class:"pt-1.5 pb-0.5"},_=(0,u._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),b=[_],x={key:1,class:"text-2xl text-primary"},h={key:0},k={key:1},U={key:2},S={key:3},D={key:2,class:"pt-1.5 pb-0.5"},$=(0,u._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),Z=[$],V={class:"text-orange-500"},C={key:0,class:"max-w-[24rem]"},M=(0,u._)("h3",{class:"text-primary mb-3 text-2xl"}," Опубликовать заказ под именем ",-1),H=(0,u.Uk)(" ФИО "),q=["onSubmit"],W=(0,u._)("h3",{class:"text-primary mb-3 text-2xl"},"Авторизация",-1),P={class:"text-red-500 mt-2 mb-3"},Y=(0,u.Uk)(" Номер телефона "),z={class:"mt-0.5 mb-3.5"},K=(0,u.Uk)(" Пароль "),j={class:"mt-0.5 mb-3.5"},B=(0,u.Uk)(" Войти "),O={class:"mt-3 mb-3"},L=(0,u.Uk)(" Еще нет аккаунта? "),A=["onSubmit"],F=(0,u._)("h3",{class:"text-primary mb-3 text-2xl"},"Регистрация",-1),I={class:"text-red-500 mt-2 mb-3"},R=(0,u.Uk)(" Имя "),E={class:"mt-0.5 mb-3.5"},N=(0,u.Uk)(" Фамилия "),G={class:"mt-0.5 mb-3.5"},T=(0,u.Uk)(" Отчество "),J={class:"mt-0.5 mb-3.5"},Q=(0,u.Uk)(" Номер телефона "),X={class:"mt-0.5 mb-3.5"},ee=(0,u.Uk)(" Электронный почтовый адрес "),re={class:"mt-0.5 mb-3.5"},ne=(0,u.Uk)(" Пароль "),te={class:"mt-0.5 mb-3.5"},ae=(0,u.Uk)(" Подтверждение пароля "),ue={class:"mt-0.5 mb-3.5"},ie=(0,u.Uk)(" Зарегистрироваться "),le={class:"mt-3 mb-3"},se=(0,u.Uk)(" Уже имеется аккаунт? "),oe=(0,u.Uk)(" Назад "),ce=(0,u.Uk)(" Опубликовать "),de={__name:"publish-form",props:{categorySlug:{},serviceSlugs:{}},setup:function(e){var r,n,_,$=e,de=(0,l.BK)($),me=de.categorySlug,pe=(de.serviceSlugs,(0,o.Z)()),ve=pe.onGetWhenNotLoaded,fe=pe.isLoading,we=pe.category;(0,u.bv)((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve(me.value);case 2:case"end":return e.stop()}}),e)}))));var ge=(0,c.tv)(),ye=(0,g.A)(me.value),_e=ye.onPublish,be=ye.isPublishing,xe=(ye.isPublished,ye.currentDraftedOrder,function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_e().catch((function(e){var r=e.response;console.dir(r)}));case 2:ge.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),he=(0,m.mr)(),ke=he.onRegister,Ue=he.isRegistering,Se=he.isRegistered,De=(0,l.qj)({name:"",surname:"",patronymic:"",username:"",email:"",password:"",passwordConfirmation:"",type:p.pq.customer});(0,u.YP)((function(){return De.name}),(function(){Ze.name=[]})),(0,u.YP)((function(){return De.surname}),(function(){Ze.surname=[]})),(0,u.YP)((function(){return De.patronymic}),(function(){Ze.patronymic=[]})),(0,u.YP)((function(){return De.username}),(function(){Ze.username=[]})),(0,u.YP)((function(){return De.email}),(function(){Ze.email=[]})),(0,u.YP)((function(){return De.password}),(function(){Ze.password=[]})),(0,u.YP)((function(){return De.passwordConfirmation}),(function(){Ze.passwordConfirmation=[]}));var $e={name:{required:v.BM.withMessage("Введите имя",v.C1)},surname:{required:v.BM.withMessage("Введите фамилию",v.C1)},patronymic:{requiredIf:(0,v.CF)(!1)},username:{required:v.BM.withMessage("Введите номер телефона",v.C1)},email:{required:v.BM.withMessage("Введите емэил",v.C1),email:v.BM.withMessage("Введите корректный емэил",v.Do)},password:{required:v.BM.withMessage("Укажите пароль",v.C1)},passwordConfirmation:{sameAsPassword:v.BM.withMessage("Подтверждение пароля не совподает с паролем",(0,v.sH)((0,l.Vh)(De,"password")))},type:{required:v.BM.withMessage("Укажите тип пользователя",v.C1),in:v.BM.withMessage("Тип пользователя может быть только как заказчик или исполнитель",(0,w.or)((0,v.sH)(p.pq.customer),(0,v.sH)(p.pq.executor)))}},Ze=(0,l.qj)({name:[],surname:[],patronymic:[],username:[],email:[],password:[],passwordConfirmation:[]}),Ve=(0,f.ZP)($e,De,{$externalResults:Ze}),Ce=(0,l.iH)(),Me=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ve.value.$validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:ke(De).catch((function(e){var r=e.response,n=r.data.error,t=n.type,a=n.fields,u=n.message;"validation"==t&&Object.assign(Ze,a),"auth"==t&&(Ce.value=u)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=(0,m.f0)(),qe=He.onLogin,We=He.isLogining,Pe=He.profile,Ye=He.isLogined,ze=(0,l.qj)({username:"",password:"",type:p.pq.customer});(0,u.YP)((function(){return ze.username}),(function(){je.username=[]})),(0,u.YP)((function(){return ze.password}),(function(){je.password=[]})),(0,u.YP)((function(){return ze.type}),(function(){je.type=[]}));var Ke=(0,l.qj)({username:{required:v.BM.withMessage("Введите номер телефона",v.C1)},password:{required:v.BM.withMessage("Введите номер телефона",v.C1)},type:{in:v.BM.withMessage("Тип пользователя может быть только как заказчик или исполнитель",(0,w.or)((0,v.sH)(p.pq.customer),(0,v.sH)(p.pq.executor)))}}),je=(0,l.qj)({username:[],password:[],type:[]}),Be=(0,f.ZP)(Ke,ze,{$externalResults:je}),Oe=(0,l.iH)(),Le=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Be.value.$validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:qe(ze).catch((function(e){var r=e.response,n=r.data.error,t=n.type,a=n.fields,u=n.message;"validation"==t&&Object.assign(je,a),"auth"==t&&(Oe.value=u)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){ge.back()},Fe=(0,l.iH)(!0),Ie=(0,l.iH)("".concat(null===Pe||void 0===Pe||null===(r=Pe.value)||void 0===r?void 0:r.name," ").concat(null===Pe||void 0===Pe||null===(n=Pe.value)||void 0===n?void 0:n.surname," ").concat(null===Pe||void 0===Pe||null===(_=Pe.value)||void 0===_?void 0:_.patronymic));return function(e,r){var n=(0,u.up)("c-input"),t=(0,u.up)("c-button");return(0,u.wg)(),(0,u.j4)(d.Z,{onSubmit:xe,class:(0,i.C_)({"animate-pulse":(0,l.SU)(be)})},{header:(0,u.w5)((function(){return[(0,l.SU)(fe)?((0,u.wg)(),(0,u.iD)("div",y,b)):((0,u.wg)(),(0,u.iD)("h1",x,[(0,l.SU)(m.K_)?(0,l.SU)(Se)?((0,u.wg)(),(0,u.iD)("span",k," Вы успешно зарегистрировались, опубликуйте заказ! ")):(0,l.SU)(Ye)?((0,u.wg)(),(0,u.iD)("span",U," Вы успешно авторизовались, опубликуйте заказ! ")):((0,u.wg)(),(0,u.iD)("span",S," Все готово, опубликуйте заказ! ")):((0,u.wg)(),(0,u.iD)("span",h," Почти все готово, осталось авторизоваться в системе! "))])),(0,l.SU)(fe)?((0,u.wg)(),(0,u.iD)("div",D,Z)):(0,u.kq)("",!0),(0,u._)("p",V,(0,i.zw)((0,l.SU)(we).name),1)]})),footer:(0,u.w5)((function(){return[(0,u.Wm)(t,{scheme:"secondary",type:"button",onClick:Ae,disabled:(0,l.SU)(be)},{default:(0,u.w5)((function(){return[oe]})),_:1},8,["disabled"]),(0,u.Wm)(t,{disabled:!(0,l.SU)(m.K_)||(0,l.SU)(be)},{default:(0,u.w5)((function(){return[ce]})),_:1},8,["disabled"])]})),default:(0,u.w5)((function(){return[(0,l.SU)(m.K_)?((0,u.wg)(),(0,u.iD)("div",C,[M,(0,u.Wm)(n,{modelValue:Ie.value,"onUpdate:modelValue":r[0]||(r[0]=function(e){return Ie.value=e}),name:"fullname",class:"w-full",disabled:""},{default:(0,u.w5)((function(){return[H]})),_:1},8,["modelValue"])])):Fe.value?((0,u.wg)(),(0,u.iD)("form",{key:1,onSubmit:(0,s.iM)(Le,["prevent"]),class:"max-w-[24rem]"},[W,(0,u._)("div",P,(0,i.zw)(Oe.value),1),(0,u.Wm)(n,{modelValue:ze.username,"onUpdate:modelValue":r[1]||(r[1]=function(e){return ze.username=e}),placeholder:"+998901234567",name:"username",class:"w-full",valid:!(0,l.SU)(Be).username.$error},{default:(0,u.w5)((function(){return[Y]})),_:1},8,["modelValue","valid"]),(0,u._)("div",z,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Be).username.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(n,{modelValue:ze.password,"onUpdate:modelValue":r[2]||(r[2]=function(e){return ze.password=e}),name:"password",class:"w-full",type:"password",valid:!(0,l.SU)(Be).password.$error,eye:""},{default:(0,u.w5)((function(){return[K]})),_:1},8,["modelValue","valid"]),(0,u._)("div",j,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Be).password.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(t,{class:"w-full",disabled:(0,l.SU)(We),loading:(0,l.SU)(We)},{default:(0,u.w5)((function(){return[B]})),_:1},8,["disabled","loading"]),(0,u._)("p",O,[L,(0,u._)("a",{onClick:r[3]||(r[3]=function(e){return Fe.value=!1}),class:"text-primary hover:text-primary/75 hover:cursor-pointer"}," Зарегистрируйтесь! ")])],40,q)):((0,u.wg)(),(0,u.iD)("form",{key:2,onSubmit:(0,s.iM)(Me,["prevent"]),class:"max-w-[24rem]"},[F,(0,u._)("div",I,(0,i.zw)(Ce.value),1),(0,u.Wm)(n,{modelValue:De.name,"onUpdate:modelValue":r[4]||(r[4]=function(e){return De.name=e}),name:"name",class:"w-full",type:"text",valid:!(0,l.SU)(Ve).name.$error},{default:(0,u.w5)((function(){return[R]})),_:1},8,["modelValue","valid"]),(0,u._)("div",E,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Ve).name.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(n,{modelValue:De.surname,"onUpdate:modelValue":r[5]||(r[5]=function(e){return De.surname=e}),name:"surname",class:"w-full",type:"text",valid:!(0,l.SU)(Ve).surname.$error},{default:(0,u.w5)((function(){return[N]})),_:1},8,["modelValue","valid"]),(0,u._)("div",G,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Ve).surname.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(n,{modelValue:De.patronymic,"onUpdate:modelValue":r[6]||(r[6]=function(e){return De.patronymic=e}),name:"patronymic",class:"w-full",type:"text",valid:!(0,l.SU)(Ve).patronymic.$error},{default:(0,u.w5)((function(){return[T]})),_:1},8,["modelValue","valid"]),(0,u._)("div",J,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Ve).patronymic.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(n,{modelValue:De.username,"onUpdate:modelValue":r[7]||(r[7]=function(e){return De.username=e}),name:"username",class:"w-full",type:"text",valid:!(0,l.SU)(Ve).username.$error},{default:(0,u.w5)((function(){return[Q]})),_:1},8,["modelValue","valid"]),(0,u._)("div",X,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Ve).username.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(n,{modelValue:De.email,"onUpdate:modelValue":r[8]||(r[8]=function(e){return De.email=e}),name:"email",class:"w-full",type:"email",valid:!(0,l.SU)(Ve).email.$error},{default:(0,u.w5)((function(){return[ee]})),_:1},8,["modelValue","valid"]),(0,u._)("div",re,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Ve).email.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(n,{modelValue:De.password,"onUpdate:modelValue":r[9]||(r[9]=function(e){return De.password=e}),name:"password",class:"w-full",type:"password",valid:!(0,l.SU)(Ve).password.$error,eye:""},{default:(0,u.w5)((function(){return[ne]})),_:1},8,["modelValue","valid"]),(0,u._)("div",te,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Ve).password.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(n,{modelValue:De.passwordConfirmation,"onUpdate:modelValue":r[10]||(r[10]=function(e){return De.passwordConfirmation=e}),name:"passwordConfirmation",class:"w-full",type:"password",valid:!(0,l.SU)(Ve).passwordConfirmation.$error,eye:""},{default:(0,u.w5)((function(){return[ae]})),_:1},8,["modelValue","valid"]),(0,u._)("div",ue,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(Ve).passwordConfirmation.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,i.zw)(e.$message),1)})),128))]),(0,u.Wm)(t,{class:"w-full",disabled:(0,l.SU)(Ue),loading:(0,l.SU)(Ue)},{default:(0,u.w5)((function(){return[ie]})),_:1},8,["disabled","loading"]),(0,u._)("p",le,[se,(0,u._)("a",{onClick:r[11]||(r[11]=function(e){return Fe.value=!0}),class:"text-primary hover:text-primary/75 hover:cursor-pointer"}," Авторизуйтесь! ")])],40,A))]})),_:1},8,["class"])}}};const me=de;var pe=me},4965:function(e,r,n){n.r(r),n.d(r,{default:function(){return I}});var t=n(50124),a=n(48534),u=(n(69826),n(41539),n(34553),n(47042),n(21249),n(26833),n(66252)),i=n(2262),l=n(3577),s=n(49963),o=n(59228),c=n(1875),d=n(20586),m=n(54028),p=n(62587),v=n(22201),f=n(79166),w=(0,i.qj)({}),g=(0,i.iH)(!1),y=(0,i.iH)(!1),_=(0,i.iH)(null);function b(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",parent:null,category:null};return g.value=!0,y.value=!1,_.value=(0,f.Ue)(e).then((function(e){return e.data})).then((function(e){return Object.assign(w,e.service),y.value=!0,(0,i.OT)(w)})).finally((function(){return g.value=!1})),_.value};return{isCreating:(0,i.OT)(g),isCreated:(0,i.OT)(y),promise:(0,i.OT)(_),onCreate:e}}var x=n(97402),h=n(69722),k={key:0,class:"pt-1.5 pb-0.5"},U=(0,u._)("div",{class:"h-7 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),S=[U],D={key:1,class:"text-3xl text-primary"},$={key:2,class:"pt-1.5 pb-0.5"},Z=(0,u._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),V=[Z],C={class:"text-orange-500"},M={key:0},H=(0,u._)("div",{class:"py-1.5 flex gap-2 items-center animate-pulse"},[(0,u._)("div",{class:"rounded-full h-4 w-4 border-8 border-primary/20"}),(0,u._)("div",{class:"pt-1 pb-1"},[(0,u._)("div",{class:"h-4 w-24 bg-primary/10 rounded-md"})])],-1),q=[H],W=(0,u._)("li",null,[(0,u._)("div",{class:"py-0.5 flex gap-2 items-center animate-pulse"},[(0,u._)("div",{class:"rounded-full h-4 w-4 border-8 border-primary/20"}),(0,u._)("div",{class:"h-8.5 w-48 bg-primary/10 rounded-md"})])],-1),P={key:1},Y={key:2,class:"pt-1.5 pb-0.5 mt-2"},z=(0,u._)("div",{class:"h-4 w-44 bg-primary/10 rounded-md animate-pulse"},null,-1),K=[z],j=(0,u.Uk)(" показать все услуги "),B=(0,u._)("div",{class:"h-4"},null,-1),O=(0,u.Uk)(" назад "),L=(0,u.Uk)(" продолжить "),A={__name:"select-form",props:{categorySlug:{},serviceSlugs:{}},setup:function(e){var r,n,f=e,w=(0,i.BK)(f),g=w.categorySlug,y=w.serviceSlugs,_=(0,v.tv)(),U=(0,c.Z)(),Z=U.onGetWhenNotLoaded,H=U.category,z=U.isLoading;U.isLoaded;(0,u.bv)((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z(g.value);case 2:case"end":return e.stop()}}),e)}))));var A=(0,d.Z)({perPage:1e3,category:g.value,parent:null===(r=y.value)||void 0===r?void 0:r[(null===(n=y.value)||void 0===n?void 0:n.length)-1]}),F=A.services,I=A.isLoading,R=(A.isLoaded,A.onGet),E=(0,i.iH)(!1);(0,u.bv)((0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R({});case 2:if(F.value.length<8&&(E.value=!0),se.value){e.next=5;break}return e.abrupt("return");case 5:r=se.value.services.find((function(e){return F.value.find((function(r){return r.slug==e.slug}))})),J.value=null===r||void 0===r?void 0:r.slug;case 7:case"end":return e.stop()}}),e)}))));var N=function(){_.back()},G=(0,u.Fl)((function(){var e,r;if(E.value)return F.value;var n=(null===(e=F.value)||void 0===e?void 0:e.findIndex((function(e){var r,n;return null===(r=se.value)||void 0===r||null===(n=r.services)||void 0===n?void 0:n.find((function(r){return r.slug==e.slug}))})))+1;return null===(r=F.value)||void 0===r?void 0:r.slice(0,n>8?n:8)})),T=(0,u.Fl)((function(){return z.value||I.value||le.value||de.value||fe.value})),J=(0,i.iH)(),Q=(0,i.iH)(!1),X=(0,i.iH)("");(0,u.YP)(J,(function(e){null!=e&&(Q.value=!1),ee.service=null})),(0,u.YP)(Q,(function(e){e&&(J.value=null),ee.newEntryField=null})),(0,u.YP)(X,(function(){ee.newEntryField=null}));var ee=(0,i.qj)({}),re={service:{requiredUnless:p.BM.withMessage("Выберите услугу",(0,p.Nf)(Q))},newEntry:{},newEntryField:{requiredif:p.BM.withMessage("Заполните данное поле",(0,p.CF)(Q))}},ne=(0,m.ZP)(re,{service:J,newEntry:Q,newEntryField:X},{$externalResults:ee}),te=b(),ae=te.onCreate,ue=(te.isCreating,(0,x.ls)(g.value)),ie=ue.onUpdate,le=ue.isUpdating,se=ue.currentDraftedOrder,oe=(0,x.rJ)(g.value),ce=oe.onCreate,de=oe.isCreating,me=(0,h.Z)(),pe=me.service,ve=me.onGet,fe=me.isLoading,we=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a,u,i,l,s;return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ne.value.$validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:if(!Q.value){e.next=13;break}return e.next=7,ae({name:X.value,parent:null===(u=y.value)||void 0===u?void 0:u[(null===(i=y.value)||void 0===i?void 0:i.length)-1],category:g.value}).catch((function(e){var r,n=e.response;if(400==n.status){var t=null===(r=n.data)||void 0===r?void 0:r.error,a=t.type,u=t.fields;"validation"==a&&(ee.newEntryField=u.name)}}));case 7:if(a=e.sent,null!==(l=a)&&void 0!==l&&l.id){e.next=10;break}return e.abrupt("return");case 10:console.log(a),e.next=15;break;case 13:return e.next=15,ve(J.value,{count:["children"]});case 15:if(s=y.value||[],J.value?s.push(J.value):s.push(a.slug),se.value){e.next=22;break}return e.next=20,ce({category:g.value,services:s});case 20:e.next=24;break;case 22:return e.next=24,ie({services:s});case 24:(null===pe||void 0===pe||null===(n=pe.value)||void 0===n?void 0:n.children_count)>0?location.href="/"+Object.values({categorySlug:g.value,serviceSlugs:s,form:"select"}).map((function(e){return Array.isArray(e)?e.join("/"):e})).join("/"):_.push({name:"order.update",params:{categorySlug:g.value,serviceSlugs:s,form:"work-place"}});case 25:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return function(e,r){var n=(0,u.up)("c-radio"),t=(0,u.up)("c-input"),a=(0,u.up)("h-chevron-down"),c=(0,u.up)("c-button");return(0,u.wg)(),(0,u.j4)(o.Z,{onOnSubmit:we},{header:(0,u.w5)((function(){return[(0,i.SU)(z)?((0,u.wg)(),(0,u.iD)("div",k,S)):((0,u.wg)(),(0,u.iD)("h1",D,"Выберите услугу")),(0,i.SU)(z)?((0,u.wg)(),(0,u.iD)("div",$,V)):(0,u.kq)("",!0),(0,u._)("p",C,(0,l.zw)((0,i.SU)(H).name),1)]})),footer:(0,u.w5)((function(){return[(0,u.Wm)(c,{scheme:"secondary",type:"button",onClick:N,loading:(0,i.SU)(T),disabled:(0,i.SU)(T)},{default:(0,u.w5)((function(){return[O]})),_:1},8,["loading","disabled"]),(0,u.Wm)(c,{loading:(0,i.SU)(T),disabled:(0,i.SU)(T)},{default:(0,u.w5)((function(){return[L]})),_:1},8,["loading","disabled"])]})),default:(0,u.w5)((function(){return[(0,i.SU)(I)?((0,u.wg)(),(0,u.iD)("ul",M,[((0,u.wg)(),(0,u.iD)(u.HY,null,(0,u.Ko)(8,(function(e){return(0,u._)("li",{key:"service-item-skeleton".concat(e),class:"border border-transparent"},q)})),64)),W])):((0,u.wg)(),(0,u.iD)("ul",P,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(G),(function(e){return(0,u.wg)(),(0,u.iD)("li",{key:e.id,class:"border border-transparent"},[(0,u.Wm)(n,{modelValue:J.value,"onUpdate:modelValue":r[0]||(r[0]=function(e){return J.value=e}),name:"service",value:e.slug},{default:(0,u.w5)((function(){return[(0,u.Uk)((0,l.zw)(e.name),1)]})),_:2},1032,["modelValue","value"])])})),128)),(0,u._)("li",null,[(0,u._)("label",{class:"select-none py-0.5 flex gap-2 items-center cursor-pointer",onClick:r[4]||(r[4]=function(e){return Q.value=!0})},[(0,u.wy)((0,u._)("input",{type:"radio",class:"appearance-none rounded-full h-4 w-4 border border-primary/50 hover:border-primary/75 checked:!border-[5px] checked:!border-primary/100 focus:ring-2 focus:ring-primary/50 focus:outline-none disabled:ring-0 disabled:border-8 disabled:bg-white disabled:!border-primary/20 transition-all duration-200","onUpdate:modelValue":r[1]||(r[1]=function(e){return Q.value=e}),value:!0,id:"radioNewEntry"},null,512),[[s.G2,Q.value]]),(0,u.Wm)(t,{modelValue:X.value,"onUpdate:modelValue":r[2]||(r[2]=function(e){return X.value=e}),onClick:r[3]||(r[3]=function(e){return Q.value=!0}),placeholder:"Другое",class:"!py-1"},null,8,["modelValue"]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(ne).newEntryField.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{key:e.$uid,class:"text-red-500"},(0,l.zw)(e.$message),1)})),128))])])])),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(ne).service.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{key:e.$uid,class:"text-red-500"},(0,l.zw)(e.$message),1)})),128)),(0,i.SU)(I)?((0,u.wg)(),(0,u.iD)("div",Y,K)):E.value?(0,u.kq)("",!0):((0,u.wg)(),(0,u.iD)("a",{key:3,class:"text-primary hover:text-primary/75 mt-2 inline-block",href:"javascript:;",onClick:r[5]||(r[5]=function(e){return E.value=!0})},[j,(0,u.Wm)(a,{class:"h-4 w-4 inline"})])),B]})),_:1})}}};const F=A;var I=F},4829:function(e,r,n){n.r(r),n.d(r,{default:function(){return W}});var t=n(50124),a=n(48534),u=(n(47042),n(74916),n(15306),n(66252)),i=n(2262),l=n(3577),s=n(49963),o=n(1875),c=n(97402),d=n(54028),m=n(62587),p=n(22201),v=n(59228),f={key:0,class:"pt-1.5 pb-0.5"},w=(0,u._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),g=[w],y={key:1,class:"text-2xl text-primary"},_={key:2,class:"pt-1.5 pb-0.5"},b=(0,u._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),x=[b],h={class:"text-orange-500"},k={class:"flex flex-col sm:flex-row md:flex-col lg:flex-row gap-4 min-h-[16rem]"},U={class:"flex-initial sm:flex-1 md:flex-initial lg:flex-1"},S=(0,u._)("label",{for:"startedAtField",class:"mb-2 inline-block"}," Дата и время начала работы: ",-1),D=["min"],$={class:"flex-0 sm:flex-1 md:flex-0 lg:flex-1"},Z=(0,u._)("label",{for:"endedAtField",class:"mb-2 inline-block"}," Дата и время завершения работы: ",-1),V=["min"],C=(0,u.Uk)(" Назад "),M=(0,u.Uk)(" Продолжить "),H={__name:"time-form",props:{categorySlug:{},serviceSlugs:{}},setup:function(e){var r=e,n=(0,i.BK)(r),w=n.categorySlug,b=n.serviceSlugs,H=(0,p.tv)(),q=function(){H.back()},W=(0,o.Z)(),P=W.category,Y=W.onGetWhenNotLoaded,z=W.isLoading;(0,u.bv)((0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y(w.value);case 2:case"end":return e.stop()}}),e)}))));var K=(0,c.ls)(w.value),j=K.currentDraftedOrder,B=K.onUpdate,O=(null===j||void 0===j?void 0:j.value)||{},L=O.started_at,A=O.ended_at,F=(0,i.iH)(L?new Date(L).toISOString().slice(0,-8):null),I=(0,i.iH)(A?new Date(A).toISOString().slice(0,-8):null),R=(0,i.qj)({startedAt:[],endedAt:[]}),E=(0,d.ZP)({startedAt:{required:m.BM.withMessage("Укажите дату",m.C1),minValue:m.BM.withMessage("Время начала должна быть больше текущей",(function(e){return new Date(e)>new Date}))},endedAt:{required:m.BM.withMessage("Укажите дату",m.C1),minValueRef:m.BM.withMessage("Время завершения должна быть больше времени началы",(function(e){return new Date(e)>new Date(F.value)}))}},{startedAt:F,endedAt:I},{$externalResults:R}),N=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E.value.$validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,B({started_at:new Date(F.value).toISOString().slice(0,-5).replace("T"," "),ended_at:new Date(I.value).toISOString().slice(0,-5).replace("T"," ")}).catch((function(e){var r=e.response,n=null===r||void 0===r?void 0:r.data,t=n.error;"validation"==(null===t||void 0===t?void 0:t.type)&&(R.startedAt=t.fields.started_at||[],R.endedAt=t.fields.ended_at||[])}));case 6:H.push({name:"order.update",params:{categorySlug:w.value,serviceSlugs:b.value,form:"price"}});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return function(e,r){var n=(0,u.up)("c-button");return(0,u.wg)(),(0,u.j4)(v.Z,{onOnSubmit:N},{header:(0,u.w5)((function(){return[(0,i.SU)(z)?((0,u.wg)(),(0,u.iD)("div",f,g)):((0,u.wg)(),(0,u.iD)("h1",y,"Укажите время")),(0,i.SU)(z)?((0,u.wg)(),(0,u.iD)("div",_,x)):(0,u.kq)("",!0),(0,u._)("p",h,(0,l.zw)((0,i.SU)(P).name),1)]})),footer:(0,u.w5)((function(){return[(0,u.Wm)(n,{scheme:"secondary",type:"button",onClick:q},{default:(0,u.w5)((function(){return[C]})),_:1}),(0,u.Wm)(n,null,{default:(0,u.w5)((function(){return[M]})),_:1})]})),default:(0,u.w5)((function(){return[(0,u._)("div",k,[(0,u._)("div",U,[S,(0,u.wy)((0,u._)("input",{id:"startedAtField",type:"datetime-local","onUpdate:modelValue":r[0]||(r[0]=function(e){return F.value=e}),min:(new Date).toISOString().slice(0,-8),class:"block w-full px-4 py-1.5 rounded-md bg-primary/10 border border-primary/10 hover:border-primary/50 focus:border-primary focus:outline-none"},null,8,D),[[s.nr,F.value]]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(E).startedAt.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,l.zw)(e.$message),1)})),128))]),(0,u._)("div",$,[Z,(0,u.wy)((0,u._)("input",{id:"endedAtField",type:"datetime-local","onUpdate:modelValue":r[1]||(r[1]=function(e){return I.value=e}),min:(F.value?new Date(F.value):new Date).toISOString().slice(0,-8),class:"block w-full px-4 py-1.5 rounded-md bg-primary/10 border border-primary/10 hover:border-primary/50 focus:border-primary focus:outline-none"},null,8,V),[[s.nr,I.value]]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(E).endedAt.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,l.zw)(e.$message),1)})),128))])])]})),_:1})}}};const q=H;var W=q},53996:function(e,r,n){n.r(r),n.d(r,{default:function(){return V}});var t=n(50124),a=n(48534),u=n(66252),i=n(2262),l=n(3577),s=n(1875),o=n(97402),c=n(54028),d=n(62587),m=n(22201),p=n(59228),v={key:0,class:"pt-1.5 pb-0.5"},f=(0,u._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),w=[f],g={key:1,class:"text-2xl text-primary"},y={key:2,class:"pt-1.5 pb-0.5"},_=(0,u._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),b=[_],x={class:"text-orange-500"},h=(0,u.Uk)("У исполнителя"),k=(0,u.Uk)("У заказчика"),U=(0,u.Uk)("Дистанционно"),S=(0,u.Uk)(" Назад "),D=(0,u.Uk)(" Продолжить "),$={__name:"work-place-form",props:{categorySlug:{},serviceSlugs:{}},setup:function(e){var r=e,n=(0,i.BK)(r),f=n.categorySlug,_=n.serviceSlugs,$=(0,s.Z)(),Z=$.category,V=$.isLoading,C=$.onGetWhenNotLoaded;(0,u.bv)((function(){C(f.value)}));var M=(0,o.ls)(f.value),H=M.currentDraftedOrder,q=(M.isUpdating,M.onUpdate),W=(0,o.rJ)(f.value),P=W.onCreate,Y=(W.isCreating,(0,m.tv)()),z=(0,i.qj)({is_online:H.value.is_online,at_customer:H.value.at_customer,at_executor:H.value.at_executor}),K={is_online:{requiredUnless:d.BM.withMessage("Выберите как минимум одно значение",(0,d.Nf)((function(){return!z.at_customer||!z.at_executor})))},at_executor:{requiredUnless:d.BM.withMessage("Выберите как минимум одно значение",(0,d.Nf)((function(){return z.at_customer||z.is_online})))},at_customer:{requiredUnless:d.BM.withMessage("Выберите как минимум одно значение",(0,d.Nf)((function(){return z.is_online||z.at_executor})))}},j=(0,i.qj)({is_online:null,at_customer:null,at_executor:null}),B=(0,c.ZP)(K,z,{$externalResults:j}),O=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B.value.$validate();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:if(H.value){e.next=9;break}return e.next=7,P({category:f.value,services:_.value,is_online:z.is_online,at_customer:z.at_customer,at_executor:z.at_executor});case 7:e.next=11;break;case 9:return e.next=11,q({is_online:z.is_online,at_customer:z.at_customer,at_executor:z.at_executor});case 11:if(!z.at_customer){e.next=14;break}return Y.push({name:"order.update",params:{categorySlug:f.value,serviceSlugs:_.value,form:"address"}}),e.abrupt("return");case 14:Y.push({name:"order.update",params:{categorySlug:f.value,serviceSlugs:_.value,form:"time"}});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){return Y.back()};return function(e,r){var n=(0,u.up)("c-checkbox"),t=(0,u.up)("c-button");return(0,u.wg)(),(0,u.j4)(p.Z,{onOnSubmit:O},{header:(0,u.w5)((function(){return[(0,i.SU)(V)?((0,u.wg)(),(0,u.iD)("div",v,w)):((0,u.wg)(),(0,u.iD)("h1",g,(0,l.zw)(1==(0,i.SU)(Z).id?"Выберите место проведения занятий":"Выберите место проведения работы"),1)),(0,i.SU)(V)?((0,u.wg)(),(0,u.iD)("div",y,b)):(0,u.kq)("",!0),(0,u._)("p",x,(0,l.zw)((0,i.SU)(Z).name),1)]})),footer:(0,u.w5)((function(){return[(0,u.Wm)(t,{scheme:"secondary",type:"button",onClick:L},{default:(0,u.w5)((function(){return[S]})),_:1}),(0,u.Wm)(t,null,{default:(0,u.w5)((function(){return[D]})),_:1})]})),default:(0,u.w5)((function(){return[(0,u._)("ul",null,[(0,u._)("li",null,[(0,u.Wm)(n,{modelValue:z.at_executor,"onUpdate:modelValue":r[0]||(r[0]=function(e){return z.at_executor=e})},{default:(0,u.w5)((function(){return[h]})),_:1},8,["modelValue"])]),(0,u._)("li",null,[(0,u.Wm)(n,{modelValue:z.at_customer,"onUpdate:modelValue":r[1]||(r[1]=function(e){return z.at_customer=e})},{default:(0,u.w5)((function(){return[k]})),_:1},8,["modelValue"])]),(0,u._)("li",null,[(0,u.Wm)(n,{modelValue:z.is_online,"onUpdate:modelValue":r[2]||(r[2]=function(e){return z.is_online=e})},{default:(0,u.w5)((function(){return[U]})),_:1},8,["modelValue"])])]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(B).at_customer.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,l.zw)(e.$message),1)})),128)),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(B).is_online.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,l.zw)(e.$message),1)})),128)),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,i.SU)(B).at_executor.$errors,(function(e){return(0,u.wg)(),(0,u.iD)("div",{class:"text-red-500",key:e.$uid},(0,l.zw)(e.$message),1)})),128))]})),_:1})}}};const Z=$;var V=Z}}]);
//# sourceMappingURL=group-order-forms-legacy.0dc0bb43.js.map