{"version":3,"file":"js/order-update.e1210851.js","mappings":"mMAMA,MAAMA,GAAWC,EAAAA,EAAAA,IAAS,CACtBC,GAAI,KACJC,KAAM,KACNC,KAAM,KACNC,QAAS,KACTC,YAAa,KACbC,kBAAmB,GACnBC,SAAU,GACVC,MAAO,OAELC,GAAYC,EAAAA,EAAAA,KAAI,GAEhBC,GAAUD,EAAAA,EAAAA,IAAI,MAEL,SAASE,IAEpB,MAAMC,GAAWC,EAAAA,EAAAA,KAAS,MAAQf,EAASI,OAErCY,EAAQC,MAAOC,EAAUC,EAAS,CAAEC,KAAM,OAE5CC,OAAOC,OAAOtB,EAAU,CACpBE,GAAI,KACJC,KAAM,KACNC,KAAM,KACNC,QAAS,KACTC,YAAa,KACbC,kBAAmB,GACnBC,SAAU,GACVC,MAAO,OAGXC,EAAUa,OAAQ,EAClBX,EAAQW,OAAQC,EAAAA,EAAAA,GAAcN,EAAUC,GACnCM,MAAKC,GAAYA,EAASC,OAC1BF,MAAKE,IACFN,OAAOC,OAAOtB,EAAd,OAAwB2B,QAAxB,IAAwBA,OAAxB,EAAwBA,EAAM3B,WACvB4B,EAAAA,EAAAA,IAAS5B,MACjB6B,SAAQ,IAAMnB,EAAUa,OAAQ,UAC1BX,EAAQW,OAGnBO,EAAqBb,MAAOC,EAAUC,EAAS,CAAEC,KAAM,MAEnDpB,EAASI,MAAQc,GAAYlB,EAASE,IAAMgB,QACjCF,EAAME,EAAUC,GAE7BL,EAASS,OACFK,EAAAA,EAAAA,IAAS5B,GAGbY,EAAQW,YAIFX,EAAQW,YAHJP,EAAME,EAAUC,GAMrC,MAAO,CACHnB,UAAU4B,EAAAA,EAAAA,IAAS5B,GACnBU,WAAWkB,EAAAA,EAAAA,IAASlB,GACpBI,UAAUc,EAAAA,EAAAA,IAASd,GACnBF,SAASgB,EAAAA,EAAAA,IAAShB,GAClBkB,qBACAd,QAEP,C,gOCjEMe,EAAQ,CACbC,QAAQC,EAAAA,EAAAA,KAAqB,IAC5B,wDAID,cAAcA,EAAAA,EAAAA,KAAqB,IAClC,yDAIDC,SAASD,EAAAA,EAAAA,KAAqB,IAC7B,yDAID,kBAAkBA,EAAAA,EAAAA,KAAqB,IACtC,yDAIDE,MAAMF,EAAAA,EAAAA,KAAqB,IAC1B,wDAIDG,OAAOH,EAAAA,EAAAA,KAAqB,IAC3B,yDAKDI,OAAOJ,EAAAA,EAAAA,KAAqB,IAC3B,yDAKDK,SAASL,EAAAA,EAAAA,KAAqB,IAC7B,2DAqBI,aAAEM,EAAF,aAAgBC,EAAhB,KAA8BC,KAXrBC,EAAAA,EAAAA,OAW8BC,EAAAA,EAAAA,IAAOC,KAI9C,QAAEhC,EAAF,SAAWZ,EAAX,UAAqBU,EAArB,SAAgCI,EAAhC,mBAA0CgB,KAF/BnB,EAAAA,EAAAA,IAAI,KAGpBE,EAAAA,EAAAA,M,OAEDgC,EAAAA,EAAAA,KAAU5B,gBACHa,EAAmBS,EAAahB,MAAO,CAC5CH,KAAM,CAAC,oBAAqB,UAD7B,I,uFCvEF,MAAM0B,EAAc,EAEpB,O","sources":["webpack://vue-workbase-app/./src/composables/categories/instance.js","webpack://vue-workbase-app/./src/views/order/UpdateView.vue","webpack://vue-workbase-app/./src/views/order/UpdateView.vue?eb2b"],"sourcesContent":["import { getByIdOrSlug } from \"@/api/categories\";\nimport { computed, reactive, readonly, ref } from \"vue\";\n\n\n// /** @type {{id: Number, name: String}} */\n\nconst category = reactive({\n    id: null,\n    name: null,\n    slug: null,\n    excerpt: null,\n    description: null,\n    priority_services: [],\n    services: [],\n    image: null,\n});\nconst isLoading = ref(false);\n\nconst promise = ref(null);\n\nexport default function useCategoryApi() {\n\n    const isLoaded = computed(() => !!category.slug);\n\n    const onGet = async (idOrSlug, params = { with: [] }) => {\n\n        Object.assign(category, {\n            id: null,\n            name: null,\n            slug: null,\n            excerpt: null,\n            description: null,\n            priority_services: [],\n            services: [],\n            image: null,\n        });\n\n        isLoading.value = true;\n        promise.value = getByIdOrSlug(idOrSlug, params)\n            .then(response => response.data)\n            .then(data => {\n                Object.assign(category, data?.category);\n                return readonly(category);\n            }).finally(() => isLoading.value = false);\n        return await promise.value;\n    }\n\n    const onGetWhenNotLoaded = async (idOrSlug, params = { with: [] }) => {\n\n        if (!(category.slug == idOrSlug || category.id == idOrSlug)) {\n            return await onGet(idOrSlug, params);\n        }\n        if (isLoaded.value) {\n            return readonly(category);\n        }\n\n        if (!!!promise.value) {\n            return await onGet(idOrSlug, params);\n        }\n\n        return await promise.value;\n    }\n\n    return {\n        category: readonly(category),\n        isLoading: readonly(isLoading),\n        isLoaded: readonly(isLoaded),\n        promise: readonly(promise),\n        onGetWhenNotLoaded,\n        onGet,\n    };\n}","\n<script setup>\n\timport useCategoryApi from \"@/composables/categories/instance\";\n\timport { defineAsyncComponent, onMounted, ref, toRefs } from \"vue\";\n\timport { useRouter } from \"vue-router\";\n\n\tconst forms = {\n\t\tselect: defineAsyncComponent(() =>\n\t\t\timport(\n\t\t\t\t/* webpackChunkName: \"group-order-forms\" */ \"@/components/order/forms/select-form.vue\"\n\t\t\t)\n\t\t),\n\t\t\"work-place\": defineAsyncComponent(() =>\n\t\t\timport(\n\t\t\t\t/* webpackChunkName: \"group-order-forms\" */ \"@/components/order/forms/work-place-form.vue\"\n\t\t\t)\n\t\t),\n\t\taddress: defineAsyncComponent(() =>\n\t\t\timport(\n\t\t\t\t/* webpackChunkName: \"group-order-forms\" */ \"@/components/order/forms/address-form.vue\"\n\t\t\t)\n\t\t),\n\t\t\"exit-locations\": defineAsyncComponent(() =>\n\t\t\timport(\n\t\t\t\t/* webpackChunkName: \"group-order-forms\" */ \"@/components/order/forms/exit-locations-form.vue\"\n\t\t\t)\n\t\t),\n\t\ttime: defineAsyncComponent(() =>\n\t\t\timport(\n\t\t\t\t/* webpackChunkName: \"group-order-forms\" */ \"@/components/order/forms/time-form.vue\"\n\t\t\t)\n\t\t),\n\t\tprice: defineAsyncComponent(() =>\n\t\t\timport(\n\t\t\t\t/* webpackChunkName: \"group-order-forms\" */ \"@/components/order/forms/price-form.vue\"\n\t\t\t)\n\t\t),\n\n\t\tother: defineAsyncComponent(() =>\n\t\t\timport(\n\t\t\t\t/* webpackChunkName: \"group-order-forms\" */ \"@/components/order/forms/other-form.vue\"\n\t\t\t)\n\t\t),\n\n\t\tpublish: defineAsyncComponent(() =>\n\t\t\timport(\n\t\t\t\t/* webpackChunkName: \"group-order-forms\" */ \"@/components/order/forms/publish-form.vue\"\n\t\t\t)\n\t\t),\n\t};\n\n\tconst onSubmit = (e) => {\n\t\trouter.push(\"\");\n\t};\n\n\tconst router = useRouter();\n\n\tconst back = (e) => {\n\t\trouter.back();\n\t};\n\tconst props = defineProps({\n\t\tcategorySlug: {},\n\t\tserviceSlugs: {},\n\t\tform: {},\n\t});\n\n\tconst { categorySlug, serviceSlugs, form } = toRefs(props);\n\n\tconst services = ref([]);\n\n\tconst { promise, category, isLoading, isLoaded, onGetWhenNotLoaded } =\n\t\tuseCategoryApi();\n\n\tonMounted(async () => {\n\t\tawait onGetWhenNotLoaded(categorySlug.value, {\n\t\t\twith: [\"priority_services\", \"image\"],\n\t\t});\n\t});\n</script>\n<template>\n\t<component :is=\"forms[form]\" :=\"props\"> </component>\n</template>","import script from \"./UpdateView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UpdateView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["category","reactive","id","name","slug","excerpt","description","priority_services","services","image","isLoading","ref","promise","useCategoryApi","isLoaded","computed","onGet","async","idOrSlug","params","with","Object","assign","value","getByIdOrSlug","then","response","data","readonly","finally","onGetWhenNotLoaded","forms","select","defineAsyncComponent","address","time","price","other","publish","categorySlug","serviceSlugs","form","useRouter","toRefs","props","onMounted","__exports__"],"sourceRoot":""}