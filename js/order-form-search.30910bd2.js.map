{"version":3,"file":"js/order-form-search.30910bd2.js","mappings":"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","sources":["webpack://vue-workbase-app/./src/api/orders.js","webpack://vue-workbase-app/./src/api/services.js","webpack://vue-workbase-app/./src/composables/categories/instance.js","webpack://vue-workbase-app/./src/composables/orders/instance&storage.js","webpack://vue-workbase-app/./src/composables/services/index.js","webpack://vue-workbase-app/./src/composables/services/instance.js","webpack://vue-workbase-app/./src/components/order/forms/base-form.vue","webpack://vue-workbase-app/./src/components/order/forms/base-form.vue?9a6f","webpack://vue-workbase-app/./src/components/order/forms/search-form.vue","webpack://vue-workbase-app/./src/components/order/forms/search-form.vue?ed7d"],"sourcesContent":["import axios from \"@/utils/axios\";\n\nexport const getById = (id, params = {}, config) => {\n    return axios.get(\n        `crazy/freelancer/v1.0.1/orders/${id}`,\n        { params, ...config },\n    );\n};\n\nexport const get = async (params, config) => {\n    return axios.get(\n        `crazy/freelancer/v1.0.1/orders/`,\n        { params, ...config }\n    );\n}\n\n/**\n * \n * @param  data \n * @param {import(\"axios\").AxiosRequestConfig} config \n * @returns {Promise<import(\"axios\").AxiosResponse>}\n */\nexport const create = (data = { services }, config = {}) => {\n\n    return axios.post('crazy/freelancer/v1.0.1/orders', data, config);\n}\n\nexport const update = (id, data = { services, name, address, lat, lng, is_online, at_customer, at_executor }, config = {}) => {\n    return axios.post(`crazy/freelancer/v1.0.1/orders/${id}`, data, config);\n}\n\nexport const deleteById = (id, params, config) => {\n    return axios.delete(`crazy/freelancer/v1.0.1/orders/${id}`, { params, ...config, });\n}\n\nexport const publish = (id, data = {}, config = {}) => {\n    return axios.post(`crazy/freelancer/v1.0.1/orders/${id}/publish`, data, config);\n}\n\nexport const reply = (id, data = {}, config = {}) => axios.post(`crazy/freelancer/v1.0.1/orders/${id}/replies`, data, config);","import axios from \"@/utils/axios\";\n\nexport const get = (params = { with: [], category: null, page: 1, perPage: 10, }, config = {}) => {\n    return axios.get('crazy/freelancer/v1.0.1/services', { params, ...config });\n};\n\nexport const getByIdOrSlug = (idOrSlug, params = { with: [], count: [] }, config = {}) => {\n    return axios.get(`crazy/freelancer/v1.0.1/services/${idOrSlug}`, { params, ...config });\n}\n\nexport const create = (data = { name: '', parent: null, category: null, }, config = {}) => {\n    return axios.post('crazy/freelancer/v1.0.1/services', data, config);\n} ","import { getByIdOrSlug } from \"@/api/categories\";\nimport { computed, reactive, readonly, ref } from \"vue\";\n\n\n// /** @type {{id: Number, name: String}} */\n\nconst category = reactive({\n    id: null,\n    name: null,\n    slug: null,\n    excerpt: null,\n    description: null,\n    priority_services: [],\n    services: [],\n    image: null,\n});\nconst isLoading = ref(false);\n\nconst promise = ref(null);\n\nexport default function useCategoryApi() {\n\n    const isLoaded = computed(() => !!category.slug);\n\n    const onGet = async (idOrSlug, params = { with: [] }) => {\n\n        Object.assign(category, {\n            id: null,\n            name: null,\n            slug: null,\n            excerpt: null,\n            description: null,\n            priority_services: [],\n            services: [],\n            image: null,\n        });\n\n        isLoading.value = true;\n        promise.value = getByIdOrSlug(idOrSlug, params)\n            .then(response => response.data)\n            .then(data => {\n                Object.assign(category, data?.category);\n                return readonly(category);\n            }).finally(() => isLoading.value = false);\n        return await promise.value;\n    }\n\n    const onGetWhenNotLoaded = async (idOrSlug, params = { with: [] }) => {\n\n        if (!(category.slug == idOrSlug || category.id == idOrSlug)) {\n            return await onGet(idOrSlug, params);\n        }\n        if (isLoaded.value) {\n            return readonly(category);\n        }\n\n        if (!!!promise.value) {\n            return await onGet(idOrSlug, params);\n        }\n\n        return await promise.value;\n    }\n\n    return {\n        category: readonly(category),\n        isLoading: readonly(isLoading),\n        isLoaded: readonly(isLoaded),\n        promise: readonly(promise),\n        onGetWhenNotLoaded,\n        onGet,\n    };\n}","import { create, publish, update } from \"@/api/orders\";\nimport { useLocalStorage } from \"@vueuse/core\";\nimport { computed, readonly, ref } from \"vue\";\n\nconst draftedOrders = useLocalStorage('drafted', {});\n\n\nconst isCreating = ref(false);\n\nconst createPromise = ref(null);\n\nexport function useCreateOrderApi(categorySlug) {\n    const isCreated = ref(!!draftedOrders.value[categorySlug]);\n\n    const onCreate = (data = { services: [], category: null }, config = {}) => {\n        isCreating.value = true;\n        createPromise.value = create(data)\n            .then(response => response.data)\n            .then(data => {\n                isCreated.value = true;\n                draftedOrders.value[categorySlug] = data.order;\n                return readonly(computed(() => draftedOrders.value[categorySlug]));\n            }).finally(() => isCreating.value = false);\n        return createPromise.value;\n    }\n\n    return {\n        onCreate,\n        isCreated: readonly(isCreated),\n        isCreating: readonly(isCreating),\n        promise: readonly(createPromise),\n        draftedOrders: readonly(draftedOrders),\n        currentDraftedOrder: readonly(computed(() => draftedOrders.value[categorySlug])),\n    };\n}\n\n\nconst isUpdating = ref(false);\n\nconst isUpdated = ref(false);\n\nconst updatePromise = ref(null);\n\nexport function useUpdateOrderApi(categorySlug) {\n\n    const onUpdate = (data = {\n        services: [],\n        name: null,\n        description: null,\n        price: null,\n        price_unit: null,\n        price_from: null,\n        price_up_to: null,\n        is_ranged_price: null,\n        started_at: null,\n        ended_at: null,\n        is_online: null,\n        at_executor: null,\n        at_customer: null,\n        exit_locations: null,\n        address: null,\n        lat: null,\n        lng: null,\n    }) => {\n        isUpdating.value = true;\n        isUpdated.value = false;\n        updatePromise.value = update(draftedOrders.value[categorySlug]?.id, data)\n            .then((response) => response.data)\n            .then((data) => {\n                draftedOrders.value[categorySlug] = data.order;\n                isUpdated.value = true;\n            })\n            .finally(() => isUpdating.value = false);\n\n        return updatePromise.value;\n    }\n\n    return {\n        isUpdated: readonly(isUpdated),\n        isUpdating: readonly(isUpdating),\n        promise: readonly(updatePromise),\n        onUpdate,\n        draftedOrders: readonly(draftedOrders),\n        currentDraftedOrder: readonly(computed(() => draftedOrders.value[categorySlug])),\n    };\n}\n\n\nconst isPublishing = ref(false);\n\nconst publishPromise = ref(null);\n\nexport function usePublishOrderApi(categorySlug) {\n    const isPublished = ref(false);\n\n    const onPublish = () => {\n        isPublishing.value = true;\n        return publishPromise.value = publish(draftedOrders.value[categorySlug]?.id)\n            .then(response => response.data)\n            .then(data => data?.order)\n            .then(order => {\n                isPublished.value = true;\n                delete draftedOrders.value[categorySlug];\n                return order;\n            }).finally(() => isPublishing.value = false);\n    }\n    return {\n        isPublishing: readonly(isPublishing),\n        isPublished: readonly(isPublished),\n        promise: readonly(publishPromise),\n        onPublish,\n        draftedOrders: readonly(draftedOrders),\n        currentDraftedOrder: readonly(computed(() => draftedOrders.value[categorySlug])),\n    };\n}","import { get } from \"@/api/services\";\nimport { computed, readonly, ref } from \"vue\";\n\n\nconst services = ref([]);\nconst isLoading = ref(false);\nconst promise = ref(null);\nconst isLoaded = ref(false);\n\nconst cancelController = ref(null);\n\nexport default function useServicesApi(params = { page: 1, perPage: 10, search: null, category: null, parent: null, nested: null, }) {\n\n    const onGet = async (extraParams = { page: 1, perPage: 10, search: null, category: null, parent: null, nested: null, }) => {\n\n        isLoading.value = true;\n        const mergedParams = {};\n        Object.assign(mergedParams, params, extraParams);\n        cancelController.value = new AbortController();\n        await new Promise((resolve) => setTimeout(resolve, 2000));\n        promise.value = get(mergedParams, { signal: cancelController.value.signal })\n            .then(response => response.data)\n            .then(data => {\n                services.value = data.collection;\n                isLoaded.value = true;\n                return readonly(services);\n            }).finally(() => { isLoading.value = false; });\n\n        return await promise.value;\n    };\n\n    const cancel = () => {\n        if (cancelController.value) {\n            cancelController.value.abort();\n        }\n    }\n    const clear = () => {\n        services.value = [];\n        isLoaded.value = false;\n    }\n    return {\n        isLoading: readonly(isLoading),\n        isLoaded: readonly(isLoaded),\n        services: readonly(services),\n        promise: readonly(promise),\n        onGet,\n        cancel,\n        clear,\n    };\n}","\nimport { getByIdOrSlug } from \"@/api/services\";\nimport { readonly, ref } from \"vue\";\n\n\nexport default function useServiceApi() {\n\n    const service = ref();\n\n    const isLoading = ref(false);\n\n    const isLoaded = ref(false);\n\n    const promise = ref(null);\n\n    const onGet = async (idOrSlug, params = { with: [], count: [] }, config = {}) => {\n        isLoading.value = true;\n        promise.value = getByIdOrSlug(idOrSlug, params, config)\n            .then(response => response.data)\n            .then(data => {\n                service.value = data.service;\n                isLoaded.value = true;\n                return readonly(service);\n            }).finally(() => isLoading.value = false);\n        return await promise.value;\n    };\n\n    return {\n        service: readonly(service),\n        isLoading: readonly(isLoading),\n        isLoaded: readonly(isLoaded),\n        promise: readonly(promise),\n        onGet,\n    };\n}","<script setup>\n\timport { useRouter } from \"vue-router\";\n\n\tconst emit = defineEmits([\"onSubmit\"]);\n\tconst router = useRouter();\n\tconst onSubmit = (e) => emit(\"onSubmit\", e);\n\tconst back = () => {\n\t\trouter.back();\n\t};\n</script>\n<template>\n\t<form\n\t\tclass=\"\n\t\t\tflex flex-col\n\t\t\trelative\n\t\t\tw-full\n\t\t\tmin-h-full\n\t\t\trounded-lg\n\t\t\tbg-white\n\t\t\tshadow shadow-primary/25\n\t\t\toverflow-clip\n\t\t\"\n\t\t@submit.prevent=\"onSubmit\"\n\t>\n\t\t<div class=\"p-4\">\n\t\t\t<slot name=\"header\"> </slot>\n\t\t</div>\n\t\t<div class=\"px-4 flex-1 min-h-[18rem]\">\n\t\t\t<slot> </slot>\n\t\t</div>\n\n\t\t<div\n\t\t\tclass=\"\n\t\t\t\tp-4\n\t\t\t\tsticky\n\t\t\t\tbottom-0\n\t\t\t\tbg-white\n\t\t\t\tflex\n\t\t\t\tjustify-between\n\t\t\t\tz-40\n\t\t\t\tdrop-shadow-lg\n\t\t\t\"\n\t\t>\n\t\t\t<slot name=\"footer\">\n\t\t\t\t<c-button scheme=\"secondary\" type=\"button\" @click=\"back\">\n\t\t\t\t\tотмена\n\t\t\t\t</c-button>\n\t\t\t\t<c-button> продолжить </c-button>\n\t\t\t</slot>\n\t\t</div>\n\t</form>\n</template>\n\n","import script from \"./base-form.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./base-form.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n\timport BaseForm from \"@/components/order/forms/base-form.vue\";\n\timport useCategoryApi from \"@/composables/categories/instance\";\n\timport {\n\t\tuseCreateOrderApi,\n\t\tuseUpdateOrderApi,\n\t} from \"@/composables/orders/instance&storage\";\n\timport useServicesApi from \"@/composables/services\";\n\timport useServiceApi from \"@/composables/services/instance\";\n\timport {\n\t\tcomputed,\n\t\tonMounted,\n\t\tonUnmounted,\n\t\treactive,\n\t\tref,\n\t\ttoRefs,\n\t\twatch,\n\t} from \"@vue/runtime-core\";\n\timport useVuelidate from \"@vuelidate/core\";\n\timport { required } from \"@vuelidate/validators\";\n\timport debounce from \"lodash.debounce\";\n\timport { useRouter } from \"vue-router\";\n\tconst props = defineProps({ categorySlug: {} });\n\n\tconst { categorySlug } = toRefs(props);\n\n\tconst router = useRouter();\n\n\tconst {\n\t\tcategory,\n\t\tisLoading: categoryIsLoading,\n\t\tisLoaded: categoryIsLoaded,\n\t\tonGetWhenNotLoaded: onGetCategoryWhenNotLoaded,\n\t} = useCategoryApi();\n\n\tonMounted(() => {\n\t\tonGetCategoryWhenNotLoaded(categorySlug.value, {\n\t\t\twith: [\"priority_services\", \"image\"],\n\t\t});\n\t});\n\n\tconst {\n\t\tservices,\n\t\tisLoading: servicesIsLoading,\n\t\tisLoaded: servicesIsLoaded,\n\t\tonGet: onGetServices,\n\t\tcancel: cancelLoadingServices,\n\t\tclear: clearServices,\n\t} = useServicesApi({ category: categorySlug.value, perPage: 20 });\n\n\tonUnmounted(() => {\n\t\tclearServices();\n\t});\n\n\tconst {\n\t\tonCreate: onCreateOrder,\n\t\tisCreated: orderIsCreated,\n\t\tisCreating: orderIsCreating,\n\t\tcurrentDraftedOrder,\n\t} = useCreateOrderApi(categorySlug.value);\n\n\tconst {\n\t\tisUpdated: orderIsUpdated,\n\t\tisUpdating: orderIsUpdating,\n\t\tonUpdate: onUpdateOrder,\n\t} = useUpdateOrderApi(categorySlug.value);\n\n\tconst back = (e) => {\n\t\trouter.back();\n\t};\n\n\tconst service = ref(currentDraftedOrder.value?.services?.[0]?.slug || null);\n\tconst search = ref(currentDraftedOrder.value?.services?.[0]?.name || \"\");\n\n\twatch(search, () => {\n\t\tconst searched =\n\t\t\tcategory?.priority_services?.find((s) => search.value == s.name) ||\n\t\t\tservices.value.find((s) => search.value == s.name);\n\t\tif (searched) {\n\t\t\tservice.value = searched.slug;\n\t\t} else {\n\t\t\tservice.value = null;\n\t\t}\n\n\t\tdebounce(() => {\n\t\t\tif (servicesIsLoading.value) {\n\t\t\t\tcancelLoadingServices();\n\t\t\t}\n\t\t\tonGetServices({\n\t\t\t\tcategory: category.slug,\n\t\t\t\twith: [],\n\t\t\t\tsearch: search.value,\n\t\t\t});\n\t\t}, 200)();\n\n\t\t$externalResults.service = null;\n\t});\n\n\tconst onSelectItem = (item) => {\n\t\tsearch.value = item.name;\n\t};\n\n\tconst $externalResults = reactive({});\n\n\tconst v = useVuelidate(\n\t\t{ service: { required } },\n\t\t{ service },\n\t\t{ $externalResults }\n\t);\n\n\tconst {\n\t\tservice: fetchedService,\n\t\tonGet: onGetService,\n\t\tisLoading: serviceIsLoading,\n\t} = useServiceApi();\n\n\tconst onSubmit = async (e) => {\n\t\tif (!(await v.value.$validate())) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait onGetService(service.value, { count: [\"children\"] });\n\n\t\tif (currentDraftedOrder.value) {\n\t\t\tawait onUpdateOrder({\n\t\t\t\tservices: [service.value],\n\t\t\t}).catch(({ response }) => {\n\t\t\t\tif (response.status == 400) {\n\t\t\t\t\tconst { error } = response?.data;\n\t\t\t\t\tif (error.type == \"validation\") {\n\t\t\t\t\t\t$externalResults.service = error.fields.services || [];\n\t\t\t\t\t\t$externalResults.category = error.fields.category || [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tawait onCreateOrder({\n\t\t\t\tcategory: category.slug,\n\t\t\t\tservices: [service.value],\n\t\t\t}).catch(({ response }) => {\n\t\t\t\tif (response.status == 400) {\n\t\t\t\t\tconst { error } = response?.data;\n\t\t\t\t\tif (error.type == \"validation\") {\n\t\t\t\t\t\t$externalResults.service = error.fields.services || [];\n\t\t\t\t\t\t$externalResults.category = error.fields.category || [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\trouter.push({\n\t\t\tname: \"order.update\",\n\t\t\tparams: {\n\t\t\t\tcategorySlug: categorySlug.value,\n\t\t\t\tserviceSlugs: [service.value],\n\t\t\t\tform:\n\t\t\t\t\tfetchedService.value.children_count > 0\n\t\t\t\t\t\t? \"select\"\n\t\t\t\t\t\t: \"work-place\",\n\t\t\t},\n\t\t});\n\t};\n\n\tconst isLoading = computed(\n\t\t() =>\n\t\t\tcategoryIsLoading.value ||\n\t\t\torderIsCreating.value ||\n\t\t\torderIsUpdating.value ||\n\t\t\tserviceIsLoading.value\n\t);\n</script>\n<template>\n\t<BaseForm @on-submit=\"onSubmit\">\n\t\t<template #header>\n\t\t\t<div class=\"pt-1.5 pb-0.5\" v-if=\"categoryIsLoading\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"h-7 w-96 bg-primary/10 rounded-lg animate-pulse\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t\t<h1\n\t\t\t\tclass=\"text-3xl text-primary\"\n\t\t\t\t:class=\"{ 'animate-pulse': isLoading }\"\n\t\t\t\tv-else\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tcategory.id == 1\n\t\t\t\t\t\t? \"По какому предмету нужен репетитор?\"\n\t\t\t\t\t\t: \"Что нужно сделать?\"\n\t\t\t\t}}\n\t\t\t</h1>\n\t\t\t<div v-if=\"categoryIsLoading\" class=\"pt-1.5 pb-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"h-4 w-64 bg-primary/10 rounded-md animate-pulse\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t\t<p\n\t\t\t\tclass=\"text-orange-500\"\n\t\t\t\t:class=\"{ 'animate-pulse': isLoading }\"\n\t\t\t\tv-else\n\t\t\t>\n\t\t\t\t{{ category.name }}\n\t\t\t</p>\n\t\t</template>\n\t\t<div class=\"mb-4\">\n\t\t\t<c-search\n\t\t\t\tclass=\"w-full sm:w-2/3\"\n\t\t\t\t:class=\"{ 'animate-pulse': isLoading }\"\n\t\t\t\t:disabled=\"isLoading\"\n\t\t\t\t:placeholder=\"categoryIsLoading ? '' : 'Услуга или специалист'\"\n\t\t\t\tv-model=\"search\"\n\t\t\t\t:loading=\"!servicesIsLoaded\"\n\t\t\t\t:items=\"services\"\n\t\t\t\t@on-select-item=\"onSelectItem\"\n\t\t\t>\n\t\t\t\t<template #no-items>\n\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\tПо вашему запросу услуги не найдены\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</c-search>\n\t\t\t<div\n\t\t\t\tclass=\"text-red-500\"\n\t\t\t\tv-for=\"error of v.service.$errors\"\n\t\t\t\t:key=\"error.$uid\"\n\t\t\t>\n\t\t\t\t{{ error.$message }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"categoryIsLoading\" class=\"pt-1.5 pb-0.5\">\n\t\t\t<div class=\"h-4 w-20 bg-primary/10 rounded-md animate-pulse\"></div>\n\t\t</div>\n\t\t<p\n\t\t\tv-else-if=\"\n\t\t\t\tcategoryIsLoaded && category.priority_services?.length > 0\n\t\t\t\"\n\t\t\t:class=\"{ 'animate-pulse': isLoading }\"\n\t\t>\n\t\t\tНапример:\n\t\t</p>\n\t\t<div\n\t\t\tclass=\"flex gap-4 flex-wrap min-h-[2.375rem] py-3\"\n\t\t\tv-if=\"categoryIsLoaded\"\n\t\t>\n\t\t\t<c-button\n\t\t\t\tv-for=\"service in category?.priority_services || []\"\n\t\t\t\tclass=\"rounded-full py-1 text-sm\"\n\t\t\t\toutlined\n\t\t\t\t:loading=\"isLoading\"\n\t\t\t\t:disabled=\"isLoading\"\n\t\t\t\t:key=\"service.id\"\n\t\t\t\ttype=\"button\"\n\t\t\t\t@click=\"onSelectItem(service)\"\n\t\t\t>\n\t\t\t\t{{ service.name }}\n\t\t\t</c-button>\n\t\t</div>\n\t\t<template #footer>\n\t\t\t<c-button\n\t\t\t\tscheme=\"secondary\"\n\t\t\t\ttype=\"button\"\n\t\t\t\t@click=\"back\"\n\t\t\t\t:loading=\"isLoading\"\n\t\t\t\t:disabled=\"isLoading\"\n\t\t\t>\n\t\t\t\tотмена\n\t\t\t</c-button>\n\t\t\t<c-button :loading=\"isLoading\" :disabled=\"isLoading\">\n\t\t\t\tпродолжить\n\t\t\t</c-button>\n\t\t</template>\n\t</BaseForm>\n</template>\n\n","import script from \"./search-form.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./search-form.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getById","id","params","config","axios","create","data","services","update","name","address","lat","lng","is_online","at_customer","at_executor","deleteById","publish","reply","get","with","category","page","perPage","getByIdOrSlug","idOrSlug","count","parent","reactive","slug","excerpt","description","priority_services","image","isLoading","ref","promise","useCategoryApi","isLoaded","computed","onGet","async","Object","assign","value","then","response","readonly","finally","onGetWhenNotLoaded","draftedOrders","useLocalStorage","isCreating","createPromise","useCreateOrderApi","categorySlug","isCreated","onCreate","order","currentDraftedOrder","isUpdating","isUpdated","updatePromise","useUpdateOrderApi","onUpdate","price","price_unit","price_from","price_up_to","is_ranged_price","started_at","ended_at","exit_locations","isPublishing","publishPromise","usePublishOrderApi","isPublished","onPublish","cancelController","useServicesApi","search","nested","extraParams","mergedParams","AbortController","Promise","resolve","setTimeout","signal","collection","cancel","abort","clear","useServiceApi","service","router","useRouter","onSubmit","e","emit","back","__exports__","toRefs","props","categoryIsLoading","categoryIsLoaded","onGetCategoryWhenNotLoaded","onMounted","servicesIsLoading","servicesIsLoaded","onGetServices","cancelLoadingServices","clearServices","onUnmounted","onCreateOrder","orderIsCreated","orderIsCreating","orderIsUpdated","orderIsUpdating","onUpdateOrder","watch","searched","find","s","debounce","$externalResults","onSelectItem","item","v","useVuelidate","required","fetchedService","onGetService","serviceIsLoading","$validate","catch","status","error","type","fields","push","serviceSlugs","form","children_count"],"sourceRoot":""}