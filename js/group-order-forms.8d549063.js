"use strict";(self["webpackChunkvue_workbase_app"]=self["webpackChunkvue_workbase_app"]||[]).push([[505],{30816:function(e,a,l){l.r(a),l.d(a,{default:function(){return V}});var s=l(66252),r=l(2262),t=l(3577),i=l(59228),n=l(1875),o=l(97402),u=l(54028),d=l(62587),c=l(91296),m=l.n(c),v=l(22201),p=l(15836);const w={key:0,class:"pt-1.5 pb-0.5"},g=(0,s._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),y=[g],_={key:1,class:"text-2xl text-primary"},f={key:2,class:"pt-1.5 pb-0.5"},b=(0,s._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),k=[b],U={class:"text-orange-500"},h=(0,s._)("div",null,null,-1),S=(0,s.Uk)(" Назад "),x=(0,s.Uk)(" Продолжить ");var D={__name:"address-form",props:{categorySlug:{},serviceSlugs:{}},setup(e){const a=e,{categorySlug:l,serviceSlugs:c}=(0,r.BK)(a),g=(0,v.tv)(),{category:b,onGetWhenNotLoaded:D,isLoading:$}=(0,n.Z)();(0,s.bv)((async()=>{await D(l.value)}));const{currentDraftedOrder:V,isUpdating:C,onUpdate:M}=(0,o.ls)(l.value),H={apiKey:"12a2dc9a-cec9-4cd8-a653-cb852b6dec85",lang:"ru_RU",coordorder:"latlong",enterprise:!1,version:"2.1"},q=()=>{g.back()};(0,s.bv)((async()=>{await(0,p.xk)()}));const W=e=>{null!=e.get&&(z.value=e.get("coords"))},P=(0,r.iH)(V.value.address),Y=(0,r.iH)([]),z=(0,r.iH)(V.value.lat&&V.value.lng?[V.value.lat,V.value.lng]:[]),K=(0,r.iH)(),j=e=>{z.value=e.geometry.getCoordinates(),P.value=e.getAddressLine(),console.log(Array.from(z.value)),K.value.setCenter(Array.from(z.value),16,{duration:200})};(0,s.YP)(z,m()((async()=>P.value=(await ymaps.geocode(Array.from(z.value))).geoObjects.get(0).getAddressLine()),100)),(0,s.YP)(P,(async()=>{Y.value=(await ymaps.geocode(P.value)).geoObjects.toArray()}));const B=(0,r.qj)({}),O=(0,u.ZP)({address:{required:d.BM.withMessage("Введите свой адрес",d.C1)},placemark:{}},{address:P,placemark:z},{$externalResults:B}),L=async e=>{await O.value.$validate()&&(await M({address:P.value,lat:z.value[0],lng:z.value[1]}).catch((({response:e})=>{if(400==e.status){const{error:a}=e.data;"validation"==a.type&&(B.address=a.fields.address||[],B.placemark=a.fields.lat||a.fields.lng||[])}})),g.push({name:"order.update",params:{categorySlug:l.value,serviceSlugs:c.value,form:"time"}}))};return(e,a)=>{const l=(0,s.up)("c-search"),n=(0,s.up)("c-button");return(0,s.wg)(),(0,s.j4)(i.Z,{onOnSubmit:L},{header:(0,s.w5)((()=>[(0,r.SU)($)?((0,s.wg)(),(0,s.iD)("div",w,y)):((0,s.wg)(),(0,s.iD)("h1",_,"Укажите ваш адрес")),(0,r.SU)($)?((0,s.wg)(),(0,s.iD)("div",f,k)):(0,s.kq)("",!0),(0,s._)("p",U,(0,t.zw)((0,r.SU)(b).name),1)])),footer:(0,s.w5)((()=>[(0,s.Wm)(n,{scheme:"secondary",type:"button",onClick:q},{default:(0,s.w5)((()=>[S])),_:1}),(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[x])),_:1})])),default:(0,s.w5)((()=>{var e;return[(0,s.Wm)(l,{modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value=e),items:Y.value,onOnSelectItem:j,placeholder:"Город, район, улица, дом"},{"list-item":(0,s.w5)((({item:e})=>[(0,s.Uk)((0,t.zw)(e.getAddressLine()),1)])),_:1},8,["modelValue","items"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(O).address.$errors||(0,r.SU)(O).placemark.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500 py-2",key:e.$uid},(0,t.zw)(e.$message),1)))),128)),(0,s.Wm)((0,r.SU)(p.xR),{settings:H,coords:null!==(e=z.value)&&void 0!==e&&e.length?z.value:[41.31377189085043,69.25741676336806],zoom:10,"init-without-markers":"",class:"h-96 rounded-md overflow-clip",onClick:W,onMapWasInitialized:a[1]||(a[1]=e=>K.value=e)},{default:(0,s.w5)((()=>{var e;return[h,2==(null===(e=z.value)||void 0===e?void 0:e.length)?((0,s.wg)(),(0,s.j4)((0,r.SU)(p.Jk),{key:0,markerId:"address",coords:z.value},null,8,["coords"])):(0,s.kq)("",!0)]})),_:1},8,["coords"])]})),_:1})}}};const $=D;var V=$},70029:function(e,a,l){l.r(a),l.d(a,{default:function(){return D}});var s=l(66252),r=l(3577),t=l(49963);const i={key:0,class:"pt-1.5 pb-0.5"},n=(0,s._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),o=[n],u={key:1,class:"text-2xl text-primary"},d={key:2,class:"pt-1.5 pb-0.5 mb-3"},c=(0,s._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),m=[c],v={class:"text-orange-500"},p={class:"select-none"},w=(0,s.Uk)(" у исполнителя "),g={class:"select-none"},y=(0,s.Uk)(" у заказчика "),_={class:"select-none"},f=(0,s.Uk)(" дистанционно "),b=(0,s.Uk)(" Назад "),k=(0,s.Uk)(" Продолжить ");function U(e,a){const l=(0,s.up)("c-button"),n=(0,s.up)("BaseForm");return(0,s.wg)(),(0,s.j4)(n,{onOnSubmit:e.onSubmit},{header:(0,s.w5)((()=>[e.categoryIsLoading?((0,s.wg)(),(0,s.iD)("div",i,o)):((0,s.wg)(),(0,s.iD)("h1",u,(0,r.zw)(1==e.category.id?"Выберите место проведения занятий":"Выберите место проведения работы"),1)),e.categoryIsLoading?((0,s.wg)(),(0,s.iD)("div",d,m)):(0,s.kq)("",!0),(0,s._)("p",v,(0,r.zw)(e.category.name),1)])),footer:(0,s.w5)((()=>[(0,s.Wm)(l,{scheme:"secondary",type:"button",onClick:e.back},{default:(0,s.w5)((()=>[b])),_:1},8,["onClick"]),(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[k])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("ul",null,[(0,s._)("li",null,[(0,s._)("label",p,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[0]||(a[0]=a=>e.state.at_executor=a),type:"checkbox"},null,512),[[t.e8,e.state.at_executor]]),w])]),(0,s._)("li",null,[(0,s._)("label",g,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[1]||(a[1]=a=>e.state.at_customer=a),type:"checkbox"},null,512),[[t.e8,e.state.at_customer]]),y])]),(0,s._)("li",null,[(0,s._)("label",_,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[2]||(a[2]=a=>e.state.is_online=a),type:"checkbox"},null,512),[[t.e8,e.state.is_online]]),f])])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.v.at_customer.$errors,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:a.$uid},(0,r.zw)(e.$error.message),1)))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.v.is_online.$errors,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:a.$uid},(0,r.zw)(e.$error.message),1)))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.v.at_executor.$errors,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:a.$uid},(0,r.zw)(e.$error.message),1)))),128))])),_:1},8,["onOnSubmit"])}var h=l(83744);const S={},x=(0,h.Z)(S,[["render",U]]);var D=x},64046:function(e,a,l){l.r(a),l.d(a,{default:function(){return h}});l(41817),l(21703);var s=l(66252),r=l(2262),t=l(3577),i=l(1875),n=l(97402),o=l(54028),u=l(62587),d=l(22201),c=l(59228);const m={key:0,class:"pt-1.5 pb-0.5"},v=(0,s._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),p=[v],w={key:2,class:"pt-1.5 pb-0.5"},g=(0,s._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),y=[g],_=(0,s.Uk)(" Дополнительные пожелания "),f=(0,s.Uk)(" Назад "),b=(0,s.Uk)(" Продолжить ");var k={__name:"other-form",props:{categorySlug:{},serviceSlugs:{}},setup(e){var a;const l=e,{categorySlug:v,serviceSlugs:g}=(0,r.BK)(l),k=(0,d.tv)(),U=()=>{k.back()},{category:h,onGetWhenNotLoaded:S,isLoading:x}=(0,i.Z)();(0,s.bv)((async()=>{await S(v.value)}));const{currentDraftedOrder:D,onUpdate:$,isUpdating:V}=(0,n.ls)(v.value),C=(0,r.iH)((null===D||void 0===D||null===(a=D.value)||void 0===a?void 0:a.description)||""),M=(0,r.qj)({description:[]}),H=(0,o.ZP)({description:{minLength:u.BM.withMessage("Минимиальное количество символов 5.",(0,u.Ei)(5))}},{description:C},{$externalResults:M}),q=async e=>{await H.value.$validate()&&(await $({description:C.value}).catch((({response:e})=>{const{error:a}=null===e||void 0===e?void 0:e.data;throw"validation"==(null===a||void 0===a?void 0:a.type)&&(M.description=a.fields.description||[]),new Error(a)})),k.push({name:"order.update",params:{categorySlug:v.value,serviceSlugs:g.value,form:"publish"}}))},W=(0,s.Fl)((()=>V.value||x.value));return(e,a)=>{const l=(0,s.up)("c-textarea"),i=(0,s.up)("c-button");return(0,s.wg)(),(0,s.j4)(c.Z,{onOnSubmit:q},{header:(0,s.w5)((()=>[(0,r.SU)(x)?((0,s.wg)(),(0,s.iD)("div",m,p)):((0,s.wg)(),(0,s.iD)("h1",{key:1,class:(0,t.C_)(["text-2xl text-primary",{"animate-pulse":(0,r.SU)(W)}])}," Пожелания к заказу ",2)),(0,r.SU)(x)?((0,s.wg)(),(0,s.iD)("div",w,y)):(0,s.kq)("",!0),(0,s._)("p",{class:(0,t.C_)(["text-orange-500",{"animate-pulse":(0,r.SU)(W)}])},(0,t.zw)((0,r.SU)(h).name),3)])),footer:(0,s.w5)((()=>[(0,s.Wm)(i,{scheme:"secondary",type:"button",onClick:U,loading:(0,r.SU)(W),disabled:(0,r.SU)(W)},{default:(0,s.w5)((()=>[f])),_:1},8,["loading","disabled"]),(0,s.Wm)(i,{loading:(0,r.SU)(W),disabled:(0,r.SU)(W)},{default:(0,s.w5)((()=>[b])),_:1},8,["loading","disabled"])])),default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,t.C_)({"animate-pulse":(0,r.SU)(W)})},[(0,s.Wm)(l,{autofocus:"",name:"kfjklsdj",modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),class:"w-full max-h-[600px] min-h-[170px]",rows:"10",placeholder:"В этом поле Вы можете написать дополнительные условия и уточнения по работе. Данное поле поможет специалисту лучше подготовится к работе и понять специфику задачи.\n\tНапример:\n\t1. Прошу приобрести розетки и лампочки самостоятельно, дополнительные расходы будут покрыты Заказчиком. \n\t2. По мимо уборки квартиры, необходимо постирать и погладить одежду."},{default:(0,s.w5)((()=>[_])),_:1},8,["modelValue"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(H).description.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500 mb-3 mt-1",key:e.$uid},(0,t.zw)(e.$message),1)))),128))],2)])),_:1})}}};const U=k;var h=U},27791:function(e,a,l){l.r(a),l.d(a,{default:function(){return W}});l(21703);var s=l(66252),r=l(2262),t=l(3577),i=l(1875),n=l(97402),o=l(54028),u=l(62587),d=l(22201),c=l(59228);const m={key:0,class:"pt-1.5 pb-0.5"},v=(0,s._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),p=[v],w={key:1,class:"text-2xl text-primary"},g={key:2,class:"pt-1.5 pb-0.5"},y=(0,s._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),_=[y],f={class:"text-orange-500"},b={class:"grid gap-4 grid-cols-2"},k={class:"col-span-2 sm:col-span-1 md:col-span-2 lg:col-span-1"},U=(0,s.Uk)("От:"),h=(0,s.Uk)(" Минимальный бюджет за работу "),S={class:"mt-1 mb-3"},x={class:"col-span-2 sm:col-span-1 md:col-span-2 lg:col-span-1 flex flex-col"},D=(0,s.Uk)("До:"),$=(0,s.Uk)(" Максимальный бюджет за работу "),V={class:"mt-1 mb-3"},C=(0,s.Uk)(" Назад "),M=(0,s.Uk)(" Продолжить ");var H={__name:"price-form",props:{categorySlug:{},serviceSlugs:{}},setup(e){var a,l;const v=e,{categorySlug:y,serviceSlugs:H}=(0,r.BK)(v),q=(0,d.tv)(),{category:W,onGetWhenNotLoaded:P,isLoading:Y}=(0,i.Z)();(0,s.bv)((async()=>{await P(y.value)}));const z=()=>{q.back()},{currentDraftedOrder:K,isUpdating:j,onUpdate:B}=(0,n.ls)(y.value),O=(0,r.iH)((null===(a=K.value)||void 0===a?void 0:a.price_min)||""),L=(0,r.iH)((null===(l=K.value)||void 0===l?void 0:l.price_max)||""),A=(0,r.qj)({minPrice:[],maxPrice:[]});(0,s.YP)(O,(()=>{A.minPrice=[]})),(0,s.YP)(L,(()=>{A.maxPrice=[]}));const Z={minPrice:{requiredIf:u.BM.withMessage("",(0,u.CF)(!1))},maxPrice:{required:u.BM.withMessage("Укажите максимальную цену",u.C1)}},F=(0,o.ZP)(Z,{minPrice:O,maxPrice:L},{$externalResults:A}),I=async e=>{await F.value.$validate()&&(await B({price_min:O.value||0,price_max:L.value,is_ranged_price:!0}).catch((({response:e})=>{const{error:a}=null===e||void 0===e?void 0:e.data;throw"validation"==(null===a||void 0===a?void 0:a.type)&&(A.minPrice=a.fields.price_min||[],A.maxPrice=a.fields.price_max||[]),new Error(a)})),q.push({name:"order.update",params:{categorySlug:y.value,serviceSlugs:H.value,form:"other"}}))};return(e,a)=>{const l=(0,s.up)("c-input"),i=(0,s.up)("c-button");return(0,s.wg)(),(0,s.j4)(c.Z,{onOnSubmit:I},{header:(0,s.w5)((()=>[(0,r.SU)(Y)?((0,s.wg)(),(0,s.iD)("div",m,p)):((0,s.wg)(),(0,s.iD)("h1",w,"Укажите цену за услугу")),(0,r.SU)(Y)?((0,s.wg)(),(0,s.iD)("div",g,_)):(0,s.kq)("",!0),(0,s._)("p",f,(0,t.zw)((0,r.SU)(W).name),1)])),footer:(0,s.w5)((()=>[(0,s.Wm)(i,{scheme:"secondary",type:"button",onClick:z},{default:(0,s.w5)((()=>[C])),_:1}),(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[M])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("div",b,[(0,s._)("div",k,[(0,s.Wm)(l,{placeholder:"1000",type:"number",modelValue:O.value,"onUpdate:modelValue":a[0]||(a[0]=e=>O.value=e),class:"w-full py-2",min:"0",name:"minPrice"},{prefix:(0,s.w5)((()=>[U])),default:(0,s.w5)((()=>[h])),_:1},8,["modelValue"]),(0,s._)("div",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(F).minPrice.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,t.zw)(e.$message),1)))),128))])]),(0,s._)("div",x,[(0,s.Wm)(l,{placeholder:"10000",type:"number",modelValue:L.value,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value=e),name:"maxPrice",class:"w-full py-2",autofocus:"",min:"0"},{prefix:(0,s.w5)((()=>[D])),default:(0,s.w5)((()=>[$])),_:1},8,["modelValue"]),(0,s._)("div",V,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(F).maxPrice.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,t.zw)(e.$message),1)))),128))])])])])),_:1})}}};const q=H;var W=q},56938:function(e,a,l){l.r(a),l.d(a,{default:function(){return ce}});var s=l(66252),r=l(3577),t=l(2262),i=l(49963),n=l(1875),o=l(22201),u=l(59228),d=l(19078),c=l(7294),m=l(62587),v=l(54028),p=l(32083),w=l(97402);const g={key:0,class:"pt-1.5 pb-0.5"},y=(0,s._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),_=[y],f={key:1,class:"text-2xl text-primary"},b={key:0},k={key:1},U={key:2},h={key:3},S={key:2,class:"pt-1.5 pb-0.5"},x=(0,s._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),D=[x],$={class:"text-orange-500"},V={key:0,class:"max-w-[24rem]"},C=(0,s._)("h3",{class:"text-primary mb-3 text-2xl"}," Опубликовать заказ под именем ",-1),M=(0,s.Uk)(" ФИО "),H=["onSubmit"],q=(0,s._)("h3",{class:"text-primary mb-3 text-2xl"},"Авторизация",-1),W={class:"text-red-500 mt-2 mb-3"},P=(0,s.Uk)(" Номер телефона "),Y={class:"mt-0.5 mb-3.5"},z=(0,s.Uk)(" Пароль "),K={class:"mt-0.5 mb-3.5"},j=(0,s.Uk)(" Войти "),B={class:"mt-3 mb-3"},O=(0,s.Uk)(" Еще нет аккаунта? "),L=["onSubmit"],A=(0,s._)("h3",{class:"text-primary mb-3 text-2xl"},"Регистрация",-1),Z={class:"text-red-500 mt-2 mb-3"},F=(0,s.Uk)(" Имя "),I={class:"mt-0.5 mb-3.5"},R=(0,s.Uk)(" Фамилия "),E={class:"mt-0.5 mb-3.5"},N=(0,s.Uk)(" Отчество "),G={class:"mt-0.5 mb-3.5"},T=(0,s.Uk)(" Номер телефона "),J={class:"mt-0.5 mb-3.5"},Q=(0,s.Uk)(" Электронный почтовый адрес "),X={class:"mt-0.5 mb-3.5"},ee=(0,s.Uk)(" Пароль "),ae={class:"mt-0.5 mb-3.5"},le=(0,s.Uk)(" Подтверждение пароля "),se={class:"mt-0.5 mb-3.5"},re=(0,s.Uk)(" Зарегистрироваться "),te={class:"mt-3 mb-3"},ie=(0,s.Uk)(" Уже имеется аккаунт? "),ne=(0,s.Uk)(" Назад "),oe=(0,s.Uk)(" Опубликовать ");var ue={__name:"publish-form",props:{categorySlug:{},serviceSlugs:{}},setup(e){var a,l,y;const x=e,{categorySlug:ue,serviceSlugs:de}=(0,t.BK)(x),{onGetWhenNotLoaded:ce,isLoading:me,category:ve}=(0,n.Z)();(0,s.bv)((async()=>{await ce(ue.value)}));const pe=(0,o.tv)(),{onPublish:we,isPublishing:ge,isPublished:ye,currentDraftedOrder:_e}=(0,w.A)(ue.value),fe=async()=>{await we().catch((({response:e})=>{console.dir(e)})),pe.push("/")},{onRegister:be,isRegistering:ke,isRegistered:Ue}=(0,d.mr)(),he=(0,t.qj)({name:"",surname:"",patronymic:"",username:"",email:"",password:"",passwordConfirmation:"",type:c.pq.customer});(0,s.YP)((()=>he.name),(()=>{xe.name=[]})),(0,s.YP)((()=>he.surname),(()=>{xe.surname=[]})),(0,s.YP)((()=>he.patronymic),(()=>{xe.patronymic=[]})),(0,s.YP)((()=>he.username),(()=>{xe.username=[]})),(0,s.YP)((()=>he.email),(()=>{xe.email=[]})),(0,s.YP)((()=>he.password),(()=>{xe.password=[]})),(0,s.YP)((()=>he.passwordConfirmation),(()=>{xe.passwordConfirmation=[]}));const Se={name:{required:m.BM.withMessage("Введите имя",m.C1)},surname:{required:m.BM.withMessage("Введите фамилию",m.C1)},patronymic:{requiredIf:(0,m.CF)(!1)},username:{required:m.BM.withMessage("Введите номер телефона",m.C1)},email:{required:m.BM.withMessage("Введите емэил",m.C1),email:m.BM.withMessage("Введите корректный емэил",m.Do)},password:{required:m.BM.withMessage("Укажите пароль",m.C1)},passwordConfirmation:{sameAsPassword:m.BM.withMessage("Подтверждение пароля не совподает с паролем",(0,m.sH)((0,t.Vh)(he,"password")))},type:{required:m.BM.withMessage("Укажите тип пользователя",m.C1),in:m.BM.withMessage("Тип пользователя может быть только как заказчик или исполнитель",(0,p.or)((0,m.sH)(c.pq.customer),(0,m.sH)(c.pq.executor)))}},xe=(0,t.qj)({name:[],surname:[],patronymic:[],username:[],email:[],password:[],passwordConfirmation:[]}),De=(0,v.ZP)(Se,he,{$externalResults:xe}),$e=(0,t.iH)(),Ve=async()=>{await De.value.$validate()&&be(he).catch((({response:e})=>{const{type:a,fields:l,message:s}=e.data.error;"validation"==a&&Object.assign(xe,l),"auth"==a&&($e.value=s)}))},{onLogin:Ce,isLogining:Me,profile:He,isLogined:qe}=(0,d.f0)(),We=(0,t.qj)({username:"",password:"",type:c.pq.customer});(0,s.YP)((()=>We.username),(()=>{Ye.username=[]})),(0,s.YP)((()=>We.password),(()=>{Ye.password=[]})),(0,s.YP)((()=>We.type),(()=>{Ye.type=[]}));const Pe=(0,t.qj)({username:{required:m.BM.withMessage("Введите номер телефона",m.C1)},password:{required:m.BM.withMessage("Введите номер телефона",m.C1)},type:{in:m.BM.withMessage("Тип пользователя может быть только как заказчик или исполнитель",(0,p.or)((0,m.sH)(c.pq.customer),(0,m.sH)(c.pq.executor)))}}),Ye=(0,t.qj)({username:[],password:[],type:[]}),ze=(0,v.ZP)(Pe,We,{$externalResults:Ye}),Ke=(0,t.iH)(),je=async()=>{await ze.value.$validate()&&Ce(We).catch((({response:e})=>{const{type:a,fields:l,message:s}=e.data.error;"validation"==a&&Object.assign(Ye,l),"auth"==a&&(Ke.value=s)}))},Be=()=>{pe.back()},Oe=(0,t.iH)(!0),Le=(0,t.iH)(`${null===He||void 0===He||null===(a=He.value)||void 0===a?void 0:a.name} ${null===He||void 0===He||null===(l=He.value)||void 0===l?void 0:l.surname} ${null===He||void 0===He||null===(y=He.value)||void 0===y?void 0:y.patronymic}`);return(e,a)=>{const l=(0,s.up)("c-input"),n=(0,s.up)("c-button");return(0,s.wg)(),(0,s.j4)(u.Z,{onSubmit:fe,class:(0,r.C_)({"animate-pulse":(0,t.SU)(ge)})},{header:(0,s.w5)((()=>[(0,t.SU)(me)?((0,s.wg)(),(0,s.iD)("div",g,_)):((0,s.wg)(),(0,s.iD)("h1",f,[(0,t.SU)(d.K_)?(0,t.SU)(Ue)?((0,s.wg)(),(0,s.iD)("span",k," Вы успешно зарегистрировались, опубликуйте заказ! ")):(0,t.SU)(qe)?((0,s.wg)(),(0,s.iD)("span",U," Вы успешно авторизовались, опубликуйте заказ! ")):((0,s.wg)(),(0,s.iD)("span",h," Все готово, опубликуйте заказ! ")):((0,s.wg)(),(0,s.iD)("span",b," Почти все готово, осталось авторизоваться в системе! "))])),(0,t.SU)(me)?((0,s.wg)(),(0,s.iD)("div",S,D)):(0,s.kq)("",!0),(0,s._)("p",$,(0,r.zw)((0,t.SU)(ve).name),1)])),footer:(0,s.w5)((()=>[(0,s.Wm)(n,{scheme:"secondary",type:"button",onClick:Be,disabled:(0,t.SU)(ge)},{default:(0,s.w5)((()=>[ne])),_:1},8,["disabled"]),(0,s.Wm)(n,{disabled:!(0,t.SU)(d.K_)||(0,t.SU)(ge)},{default:(0,s.w5)((()=>[oe])),_:1},8,["disabled"])])),default:(0,s.w5)((()=>[(0,t.SU)(d.K_)?((0,s.wg)(),(0,s.iD)("div",V,[C,(0,s.Wm)(l,{modelValue:Le.value,"onUpdate:modelValue":a[0]||(a[0]=e=>Le.value=e),name:"fullname",class:"w-full",disabled:""},{default:(0,s.w5)((()=>[M])),_:1},8,["modelValue"])])):Oe.value?((0,s.wg)(),(0,s.iD)("form",{key:1,onSubmit:(0,i.iM)(je,["prevent"]),class:"max-w-[24rem]"},[q,(0,s._)("div",W,(0,r.zw)(Ke.value),1),(0,s.Wm)(l,{modelValue:We.username,"onUpdate:modelValue":a[1]||(a[1]=e=>We.username=e),placeholder:"+998901234567",name:"username",class:"w-full",valid:!(0,t.SU)(ze).username.$error},{default:(0,s.w5)((()=>[P])),_:1},8,["modelValue","valid"]),(0,s._)("div",Y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(ze).username.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(l,{modelValue:We.password,"onUpdate:modelValue":a[2]||(a[2]=e=>We.password=e),name:"password",class:"w-full",type:"password",valid:!(0,t.SU)(ze).password.$error,eye:""},{default:(0,s.w5)((()=>[z])),_:1},8,["modelValue","valid"]),(0,s._)("div",K,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(ze).password.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(n,{class:"w-full",disabled:(0,t.SU)(Me),loading:(0,t.SU)(Me)},{default:(0,s.w5)((()=>[j])),_:1},8,["disabled","loading"]),(0,s._)("p",B,[O,(0,s._)("a",{onClick:a[3]||(a[3]=e=>Oe.value=!1),class:"text-primary hover:text-primary/75 hover:cursor-pointer"}," Зарегистрируйтесь! ")])],40,H)):((0,s.wg)(),(0,s.iD)("form",{key:2,onSubmit:(0,i.iM)(Ve,["prevent"]),class:"max-w-[24rem]"},[A,(0,s._)("div",Z,(0,r.zw)($e.value),1),(0,s.Wm)(l,{modelValue:he.name,"onUpdate:modelValue":a[4]||(a[4]=e=>he.name=e),name:"name",class:"w-full",type:"text",valid:!(0,t.SU)(De).name.$error},{default:(0,s.w5)((()=>[F])),_:1},8,["modelValue","valid"]),(0,s._)("div",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(De).name.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(l,{modelValue:he.surname,"onUpdate:modelValue":a[5]||(a[5]=e=>he.surname=e),name:"surname",class:"w-full",type:"text",valid:!(0,t.SU)(De).surname.$error},{default:(0,s.w5)((()=>[R])),_:1},8,["modelValue","valid"]),(0,s._)("div",E,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(De).surname.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(l,{modelValue:he.patronymic,"onUpdate:modelValue":a[6]||(a[6]=e=>he.patronymic=e),name:"patronymic",class:"w-full",type:"text",valid:!(0,t.SU)(De).patronymic.$error},{default:(0,s.w5)((()=>[N])),_:1},8,["modelValue","valid"]),(0,s._)("div",G,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(De).patronymic.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(l,{modelValue:he.username,"onUpdate:modelValue":a[7]||(a[7]=e=>he.username=e),name:"username",class:"w-full",type:"text",valid:!(0,t.SU)(De).username.$error},{default:(0,s.w5)((()=>[T])),_:1},8,["modelValue","valid"]),(0,s._)("div",J,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(De).username.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(l,{modelValue:he.email,"onUpdate:modelValue":a[8]||(a[8]=e=>he.email=e),name:"email",class:"w-full",type:"email",valid:!(0,t.SU)(De).email.$error},{default:(0,s.w5)((()=>[Q])),_:1},8,["modelValue","valid"]),(0,s._)("div",X,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(De).email.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(l,{modelValue:he.password,"onUpdate:modelValue":a[9]||(a[9]=e=>he.password=e),name:"password",class:"w-full",type:"password",valid:!(0,t.SU)(De).password.$error,eye:""},{default:(0,s.w5)((()=>[ee])),_:1},8,["modelValue","valid"]),(0,s._)("div",ae,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(De).password.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(l,{modelValue:he.passwordConfirmation,"onUpdate:modelValue":a[10]||(a[10]=e=>he.passwordConfirmation=e),name:"passwordConfirmation",class:"w-full",type:"password",valid:!(0,t.SU)(De).passwordConfirmation.$error,eye:""},{default:(0,s.w5)((()=>[le])),_:1},8,["modelValue","valid"]),(0,s._)("div",se,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(De).passwordConfirmation.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,r.zw)(e.$message),1)))),128))]),(0,s.Wm)(n,{class:"w-full",disabled:(0,t.SU)(ke),loading:(0,t.SU)(ke)},{default:(0,s.w5)((()=>[re])),_:1},8,["disabled","loading"]),(0,s._)("p",te,[ie,(0,s._)("a",{onClick:a[11]||(a[11]=e=>Oe.value=!0),class:"text-primary hover:text-primary/75 hover:cursor-pointer"}," Авторизуйтесь! ")])],40,L))])),_:1},8,["class"])}}};const de=ue;var ce=de},4965:function(e,a,l){l.r(a),l.d(a,{default:function(){return Z}});var s=l(66252),r=l(2262),t=l(3577),i=l(49963),n=l(59228),o=l(1875),u=l(20586),d=l(54028),c=l(62587),m=l(22201),v=l(79166);const p=(0,r.qj)({}),w=(0,r.iH)(!1),g=(0,r.iH)(!1),y=(0,r.iH)(null);function _(){const e=(e={name:"",parent:null,category:null})=>(w.value=!0,g.value=!1,y.value=(0,v.Ue)(e).then((e=>e.data)).then((e=>(Object.assign(p,e.service),g.value=!0,(0,r.OT)(p)))).finally((()=>w.value=!1)),y.value);return{isCreating:(0,r.OT)(w),isCreated:(0,r.OT)(g),promise:(0,r.OT)(y),onCreate:e}}var f=l(97402),b=l(69722);const k={key:0,class:"pt-1.5 pb-0.5"},U=(0,s._)("div",{class:"h-7 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),h=[U],S={key:1,class:"text-3xl text-primary"},x={key:2,class:"pt-1.5 pb-0.5"},D=(0,s._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),$=[D],V={class:"text-orange-500"},C={key:0},M=(0,s._)("div",{class:"py-1.5 flex gap-2 items-center animate-pulse"},[(0,s._)("div",{class:"rounded-full h-4 w-4 border-8 border-primary/20"}),(0,s._)("div",{class:"pt-1 pb-1"},[(0,s._)("div",{class:"h-4 w-24 bg-primary/10 rounded-md"})])],-1),H=[M],q=(0,s._)("li",null,[(0,s._)("div",{class:"py-0.5 flex gap-2 items-center animate-pulse"},[(0,s._)("div",{class:"rounded-full h-4 w-4 border-8 border-primary/20"}),(0,s._)("div",{class:"h-8.5 w-48 bg-primary/10 rounded-md"})])],-1),W={key:1},P={key:2,class:"pt-1.5 pb-0.5 mt-2"},Y=(0,s._)("div",{class:"h-4 w-44 bg-primary/10 rounded-md animate-pulse"},null,-1),z=[Y],K=(0,s.Uk)(" показать все услуги "),j=(0,s._)("div",{class:"h-4"},null,-1),B=(0,s.Uk)(" назад "),O=(0,s.Uk)(" продолжить ");var L={__name:"select-form",props:{categorySlug:{},serviceSlugs:{}},setup(e){var a,l;const v=e,{categorySlug:p,serviceSlugs:w}=(0,r.BK)(v),g=(0,m.tv)(),{onGetWhenNotLoaded:y,category:U,isLoading:D,isLoaded:M}=(0,o.Z)();(0,s.bv)((async()=>{await y(p.value)}));const{services:Y,isLoading:L,isLoaded:A,onGet:Z}=(0,u.Z)({perPage:1e3,category:p.value,parent:null===(a=w.value)||void 0===a?void 0:a[(null===(l=w.value)||void 0===l?void 0:l.length)-1]}),F=(0,r.iH)(!1);(0,s.bv)((async()=>{if(await Z({}),Y.value.length<8&&(F.value=!0),!re.value)return;const e=re.value.services.find((e=>Y.value.find((a=>a.slug==e.slug))));N.value=null===e||void 0===e?void 0:e.slug}));const I=()=>{g.back()},R=(0,s.Fl)((()=>{var e,a;if(F.value)return Y.value;const l=(null===(e=Y.value)||void 0===e?void 0:e.findIndex((e=>{var a,l;return null===(a=re.value)||void 0===a||null===(l=a.services)||void 0===l?void 0:l.find((a=>a.slug==e.slug))})))+1;return null===(a=Y.value)||void 0===a?void 0:a.slice(0,l>8?l:8)})),E=(0,s.Fl)((()=>D.value||L.value||se.value||ie.value||ue.value)),N=(0,r.iH)(),G=(0,r.iH)(!1),T=(0,r.iH)("");(0,s.YP)(N,(e=>{null!=e&&(G.value=!1),J.service=null})),(0,s.YP)(G,(e=>{e&&(N.value=null),J.newEntryField=null})),(0,s.YP)(T,(()=>{J.newEntryField=null}));const J=(0,r.qj)({}),Q={service:{requiredUnless:c.BM.withMessage("Выберите услугу",(0,c.Nf)(G))},newEntry:{},newEntryField:{requiredif:c.BM.withMessage("Заполните данное поле",(0,c.CF)(G))}},X=(0,d.ZP)(Q,{service:N,newEntry:G,newEntryField:T},{$externalResults:J}),{onCreate:ee,isCreating:ae}=_(),{onUpdate:le,isUpdating:se,currentDraftedOrder:re}=(0,f.ls)(p.value),{onCreate:te,isCreating:ie}=(0,f.rJ)(p.value),{service:ne,onGet:oe,isLoading:ue}=(0,b.Z)(),de=async e=>{var a;if(!await X.value.$validate())return;let l;if(G.value){var s,r,t;if(l=await ee({name:T.value,parent:null===(s=w.value)||void 0===s?void 0:s[(null===(r=w.value)||void 0===r?void 0:r.length)-1],category:p.value}).catch((({response:e})=>{var a;if(400!=e.status)return;const{type:l,fields:s}=null===(a=e.data)||void 0===a?void 0:a.error;"validation"==l&&(J.newEntryField=s.name)})),null===(t=l)||void 0===t||!t.id)return;console.log(l)}else await oe(N.value,{count:["children"]});const i=w.value||[];N.value?i.push(N.value):i.push(l.slug),re.value?await le({services:i}):await te({category:p.value,services:i}),(null===ne||void 0===ne||null===(a=ne.value)||void 0===a?void 0:a.children_count)>0?location.href="/"+Object.values({categorySlug:p.value,serviceSlugs:i,form:"select"}).map((e=>Array.isArray(e)?e.join("/"):e)).join("/"):g.push({name:"order.update",params:{categorySlug:p.value,serviceSlugs:i,form:"work-place"}})};return(e,a)=>{const l=(0,s.up)("c-radio"),o=(0,s.up)("c-input"),u=(0,s.up)("h-chevron-down"),d=(0,s.up)("c-button");return(0,s.wg)(),(0,s.j4)(n.Z,{onOnSubmit:de},{header:(0,s.w5)((()=>[(0,r.SU)(D)?((0,s.wg)(),(0,s.iD)("div",k,h)):((0,s.wg)(),(0,s.iD)("h1",S,"Выберите услугу")),(0,r.SU)(D)?((0,s.wg)(),(0,s.iD)("div",x,$)):(0,s.kq)("",!0),(0,s._)("p",V,(0,t.zw)((0,r.SU)(U).name),1)])),footer:(0,s.w5)((()=>[(0,s.Wm)(d,{scheme:"secondary",type:"button",onClick:I,loading:(0,r.SU)(E),disabled:(0,r.SU)(E)},{default:(0,s.w5)((()=>[B])),_:1},8,["loading","disabled"]),(0,s.Wm)(d,{loading:(0,r.SU)(E),disabled:(0,r.SU)(E)},{default:(0,s.w5)((()=>[O])),_:1},8,["loading","disabled"])])),default:(0,s.w5)((()=>[(0,r.SU)(L)?((0,s.wg)(),(0,s.iD)("ul",C,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(8,(e=>(0,s._)("li",{key:`service-item-skeleton${e}`,class:"border border-transparent"},H))),64)),q])):((0,s.wg)(),(0,s.iD)("ul",W,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(R),(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id,class:"border border-transparent"},[(0,s.Wm)(l,{modelValue:N.value,"onUpdate:modelValue":a[0]||(a[0]=e=>N.value=e),name:"service",value:e.slug},{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(e.name),1)])),_:2},1032,["modelValue","value"])])))),128)),(0,s._)("li",null,[(0,s._)("label",{class:"select-none py-0.5 flex gap-2 items-center cursor-pointer",onClick:a[4]||(a[4]=e=>G.value=!0)},[(0,s.wy)((0,s._)("input",{type:"radio",class:"appearance-none rounded-full h-4 w-4 border border-primary/50 hover:border-primary/75 checked:!border-[5px] checked:!border-primary/100 focus:ring-2 focus:ring-primary/50 focus:outline-none disabled:ring-0 disabled:border-8 disabled:bg-white disabled:!border-primary/20 transition-all duration-200","onUpdate:modelValue":a[1]||(a[1]=e=>G.value=e),value:!0,id:"radioNewEntry"},null,512),[[i.G2,G.value]]),(0,s.Wm)(o,{modelValue:T.value,"onUpdate:modelValue":a[2]||(a[2]=e=>T.value=e),onClick:a[3]||(a[3]=e=>G.value=!0),placeholder:"Другое",class:"!py-1"},null,8,["modelValue"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(X).newEntryField.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.$uid,class:"text-red-500"},(0,t.zw)(e.$message),1)))),128))])])])),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(X).service.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.$uid,class:"text-red-500"},(0,t.zw)(e.$message),1)))),128)),(0,r.SU)(L)?((0,s.wg)(),(0,s.iD)("div",P,z)):F.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",{key:3,class:"text-primary hover:text-primary/75 mt-2 inline-block",href:"javascript:;",onClick:a[5]||(a[5]=e=>F.value=!0)},[K,(0,s.Wm)(u,{class:"h-4 w-4 inline"})])),j])),_:1})}}};const A=L;var Z=A},4829:function(e,a,l){l.r(a),l.d(a,{default:function(){return q}});l(74916),l(15306);var s=l(66252),r=l(2262),t=l(3577),i=l(49963),n=l(1875),o=l(97402),u=l(54028),d=l(62587),c=l(22201),m=l(59228);const v={key:0,class:"pt-1.5 pb-0.5"},p=(0,s._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),w=[p],g={key:1,class:"text-2xl text-primary"},y={key:2,class:"pt-1.5 pb-0.5"},_=(0,s._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),f=[_],b={class:"text-orange-500"},k={class:"flex flex-col sm:flex-row md:flex-col lg:flex-row gap-4 min-h-[16rem]"},U={class:"flex-initial sm:flex-1 md:flex-initial lg:flex-1"},h=(0,s._)("label",{for:"startedAtField",class:"mb-2 inline-block"}," Дата и время начала работы: ",-1),S=["min"],x={class:"flex-0 sm:flex-1 md:flex-0 lg:flex-1"},D=(0,s._)("label",{for:"endedAtField",class:"mb-2 inline-block"}," Дата и время завершения работы: ",-1),$=["min"],V=(0,s.Uk)(" Назад "),C=(0,s.Uk)(" Продолжить ");var M={__name:"time-form",props:{categorySlug:{},serviceSlugs:{}},setup(e){const a=e,{categorySlug:l,serviceSlugs:p}=(0,r.BK)(a),_=(0,c.tv)(),M=()=>{_.back()},{category:H,onGetWhenNotLoaded:q,isLoading:W}=(0,n.Z)();(0,s.bv)((async()=>{await q(l.value)}));const{currentDraftedOrder:P,onUpdate:Y}=(0,o.ls)(l.value),{started_at:z,ended_at:K}=(null===P||void 0===P?void 0:P.value)||{},j=(0,r.iH)(z?new Date(z).toISOString().slice(0,-8):null),B=(0,r.iH)(K?new Date(K).toISOString().slice(0,-8):null),O=(0,r.qj)({startedAt:[],endedAt:[]}),L=(0,u.ZP)({startedAt:{required:d.BM.withMessage("Укажите дату",d.C1),minValue:d.BM.withMessage("Время начала должна быть больше текущей",(e=>new Date(e)>new Date))},endedAt:{required:d.BM.withMessage("Укажите дату",d.C1),minValueRef:d.BM.withMessage("Время завершения должна быть больше времени началы",(e=>new Date(e)>new Date(j.value)))}},{startedAt:j,endedAt:B},{$externalResults:O}),A=async e=>{await L.value.$validate()&&(await Y({started_at:new Date(j.value).toISOString().slice(0,-5).replace("T"," "),ended_at:new Date(B.value).toISOString().slice(0,-5).replace("T"," ")}).catch((({response:e})=>{const{error:a}=null===e||void 0===e?void 0:e.data;"validation"==(null===a||void 0===a?void 0:a.type)&&(O.startedAt=a.fields.started_at||[],O.endedAt=a.fields.ended_at||[])})),_.push({name:"order.update",params:{categorySlug:l.value,serviceSlugs:p.value,form:"price"}}))};return(e,a)=>{const l=(0,s.up)("c-button");return(0,s.wg)(),(0,s.j4)(m.Z,{onOnSubmit:A},{header:(0,s.w5)((()=>[(0,r.SU)(W)?((0,s.wg)(),(0,s.iD)("div",v,w)):((0,s.wg)(),(0,s.iD)("h1",g,"Укажите время")),(0,r.SU)(W)?((0,s.wg)(),(0,s.iD)("div",y,f)):(0,s.kq)("",!0),(0,s._)("p",b,(0,t.zw)((0,r.SU)(H).name),1)])),footer:(0,s.w5)((()=>[(0,s.Wm)(l,{scheme:"secondary",type:"button",onClick:M},{default:(0,s.w5)((()=>[V])),_:1}),(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[C])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("div",k,[(0,s._)("div",U,[h,(0,s.wy)((0,s._)("input",{id:"startedAtField",type:"datetime-local","onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),min:(new Date).toISOString().slice(0,-8),class:"block w-full px-4 py-1.5 rounded-md bg-primary/10 border border-primary/10 hover:border-primary/50 focus:border-primary focus:outline-none"},null,8,S),[[i.nr,j.value]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(L).startedAt.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,t.zw)(e.$message),1)))),128))]),(0,s._)("div",x,[D,(0,s.wy)((0,s._)("input",{id:"endedAtField",type:"datetime-local","onUpdate:modelValue":a[1]||(a[1]=e=>B.value=e),min:(j.value?new Date(j.value):new Date).toISOString().slice(0,-8),class:"block w-full px-4 py-1.5 rounded-md bg-primary/10 border border-primary/10 hover:border-primary/50 focus:border-primary focus:outline-none"},null,8,$),[[i.nr,B.value]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(L).endedAt.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,t.zw)(e.$message),1)))),128))])])])),_:1})}}};const H=M;var q=H},53996:function(e,a,l){l.r(a),l.d(a,{default:function(){return $}});var s=l(66252),r=l(2262),t=l(3577),i=l(1875),n=l(97402),o=l(54028),u=l(62587),d=l(22201),c=l(59228);const m={key:0,class:"pt-1.5 pb-0.5"},v=(0,s._)("div",{class:"h-6 w-96 bg-primary/10 rounded-lg animate-pulse"},null,-1),p=[v],w={key:1,class:"text-2xl text-primary"},g={key:2,class:"pt-1.5 pb-0.5"},y=(0,s._)("div",{class:"h-4 w-64 bg-primary/10 rounded-md animate-pulse"},null,-1),_=[y],f={class:"text-orange-500"},b=(0,s.Uk)("У исполнителя"),k=(0,s.Uk)("У заказчика"),U=(0,s.Uk)("Дистанционно"),h=(0,s.Uk)(" Назад "),S=(0,s.Uk)(" Продолжить ");var x={__name:"work-place-form",props:{categorySlug:{},serviceSlugs:{}},setup(e){const a=e,{categorySlug:l,serviceSlugs:v}=(0,r.BK)(a),{category:y,isLoading:x,onGetWhenNotLoaded:D}=(0,i.Z)();(0,s.bv)((()=>{D(l.value)}));const{currentDraftedOrder:$,isUpdating:V,onUpdate:C}=(0,n.ls)(l.value),{onCreate:M,isCreating:H}=(0,n.rJ)(l.value),q=(0,d.tv)(),W=(0,r.qj)({is_online:$.value.is_online,at_customer:$.value.at_customer,at_executor:$.value.at_executor}),P={is_online:{requiredUnless:u.BM.withMessage("Выберите как минимум одно значение",(0,u.Nf)((()=>!W.at_customer||!W.at_executor)))},at_executor:{requiredUnless:u.BM.withMessage("Выберите как минимум одно значение",(0,u.Nf)((()=>W.at_customer||W.is_online)))},at_customer:{requiredUnless:u.BM.withMessage("Выберите как минимум одно значение",(0,u.Nf)((()=>W.is_online||W.at_executor)))}},Y=(0,r.qj)({is_online:null,at_customer:null,at_executor:null}),z=(0,o.ZP)(P,W,{$externalResults:Y}),K=async()=>{await z.value.$validate()&&($.value?await C({is_online:W.is_online,at_customer:W.at_customer,at_executor:W.at_executor}):await M({category:l.value,services:v.value,is_online:W.is_online,at_customer:W.at_customer,at_executor:W.at_executor}),W.at_customer?q.push({name:"order.update",params:{categorySlug:l.value,serviceSlugs:v.value,form:"address"}}):q.push({name:"order.update",params:{categorySlug:l.value,serviceSlugs:v.value,form:"time"}}))},j=()=>q.back();return(e,a)=>{const l=(0,s.up)("c-checkbox"),i=(0,s.up)("c-button");return(0,s.wg)(),(0,s.j4)(c.Z,{onOnSubmit:K},{header:(0,s.w5)((()=>[(0,r.SU)(x)?((0,s.wg)(),(0,s.iD)("div",m,p)):((0,s.wg)(),(0,s.iD)("h1",w,(0,t.zw)(1==(0,r.SU)(y).id?"Выберите место проведения занятий":"Выберите место проведения работы"),1)),(0,r.SU)(x)?((0,s.wg)(),(0,s.iD)("div",g,_)):(0,s.kq)("",!0),(0,s._)("p",f,(0,t.zw)((0,r.SU)(y).name),1)])),footer:(0,s.w5)((()=>[(0,s.Wm)(i,{scheme:"secondary",type:"button",onClick:j},{default:(0,s.w5)((()=>[h])),_:1}),(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[S])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Wm)(l,{modelValue:W.at_executor,"onUpdate:modelValue":a[0]||(a[0]=e=>W.at_executor=e)},{default:(0,s.w5)((()=>[b])),_:1},8,["modelValue"])]),(0,s._)("li",null,[(0,s.Wm)(l,{modelValue:W.at_customer,"onUpdate:modelValue":a[1]||(a[1]=e=>W.at_customer=e)},{default:(0,s.w5)((()=>[k])),_:1},8,["modelValue"])]),(0,s._)("li",null,[(0,s.Wm)(l,{modelValue:W.is_online,"onUpdate:modelValue":a[2]||(a[2]=e=>W.is_online=e)},{default:(0,s.w5)((()=>[U])),_:1},8,["modelValue"])])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(z).at_customer.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,t.zw)(e.$message),1)))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(z).is_online.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,t.zw)(e.$message),1)))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(z).at_executor.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"text-red-500",key:e.$uid},(0,t.zw)(e.$message),1)))),128))])),_:1})}}};const D=x;var $=D}}]);
//# sourceMappingURL=group-order-forms.8d549063.js.map